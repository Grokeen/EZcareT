<base:UserControlBase x:Class="HIS.MC.DR.RM.RV.UI.SelectIntegrationMedicalRecordAsk"
                      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                      xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
                      xmlns:base="clr-namespace:HIS.UI.Base;assembly=HIS.UI.Base"
                      xmlns:baseConverter="clr-namespace:HIS.UI.Utility.Converters;assembly=HIS.UI.Utility"
                      xmlns:local="clr-namespace:HIS.PA.AC.PE.PS.UI"
                      xmlns:MCCore="clr-namespace:HIS.MC.Core.Common.Controls;assembly=HIS.MC.Core.Common.Controls"
                      xmlns:my="clr-namespace:HIS.UI.Controls;assembly=HIS.UI.Controls"
                      xmlns:recordView="clr-namespace:HIS.PA.AC.PE.PS.UI;assembly=HIS.PA.AC.PE.PS.UI"
                      xmlns:hsfcwpfec="clr-namespace:HSF.Controls.WPF.Extension.Commands;assembly=HSF.Controls.WPF.Extension"
                      xmlns:form="clr-namespace:HIS.MC.CI.Core.UI;assembly=HIS.MC.CI.Core.UI"
                      xmlns:rpcoreui="clr-namespace:HIS.RP.CORE.COM.UI.Control;assembly=HIS.RP.CORE.COM.UI"
                      xmlns:PresentationOptions="http://schemas.microsoft.com/winfx/2006/xaml/presentation/options"
                      mc:Ignorable="d"
                      d:DesignWidth="1280"
                      d:DesignHeight="1024"
                      DesignWidth="1280"
                      DesignHeight="1024"
                      Background="{StaticResource MainNormalBackground}"
                      UseLayoutRounding="True"
                      x:Name="ucSelectIntegrationMedicalRecordAsk">
    <!-- 기본 -->
    <!--Background="{StaticResource MainNormalBackground}"-->
    <!-- XBAP용 -->
    <!--Background="{DynamicResource MainNormalBackground}"-->

    <UserControl.DataContext>
        <local:SelectIntegrationMedicalRecordAskData />
    </UserControl.DataContext>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction Command="{Binding LoadCommand}"
                                   CommandParameter="{Binding ElementName=ucSelectIntegrationMedicalRecordAsk}"></i:InvokeCommandAction>
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <base:UserControlBase.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <!-- 일반 -->
                <SharedResourceDictionary SourcePath="/HIS.UI.Design.Themes;component/GeneralResources.xaml"
                                          Source="/HIS.UI.Design.Themes;component/GeneralResources.xaml" />
                <SharedResourceDictionary SourcePath="/HIS.UI.Design.Themes;component/MCResources.xaml"
                                          Source="/HIS.UI.Design.Themes;component/MCResources.xaml" />
                <!-- XBAP용 -->
                <!--<ResourceDictionary Source="/HIS.UI.Design.Themes;component/GeneralResources.xaml" />
                <ResourceDictionary Source="/HIS.UI.Design.Themes;component/MCResources.xaml" />-->
            </ResourceDictionary.MergedDictionaries>
            <!-- CONVERTER -->
            <baseConverter:YesNoToBooleanConverter  x:Key="YesNoToBooleanConverter" />
            <local:SEX_TP_NMConverter  x:Key="SEX_TP_NMConverter" />
            <local:PACT_TP_NMConverter  x:Key="PACT_TP_NMConverter" />
            <local:VisibilityConverter x:Key="VisibilityConverter" />
            <baseConverter:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
            <!-- STORYBOARD -->

            <FrameworkElement x:Key="proxy"
                              DataContext="{Binding }" />

        </ResourceDictionary>
    </base:UserControlBase.Resources>
    <Grid Grid.IsSharedSizeScope="True">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition />
            <RowDefinition Height="30" />
        </Grid.RowDefinitions>
        <Border Grid.ColumnSpan="1"
                Background="#FF1C2037"
                Grid.Row="0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Border>
                    <Border.Background>
                        <LinearGradientBrush PresentationOptions:Freeze="true" EndPoint="0.5,1"
                                             StartPoint="0.5,0">
                            <GradientStop Color="#99000000" />
                            <GradientStop Offset="1"
                                          Color="#00394068" />
                        </LinearGradientBrush>
                    </Border.Background>
                </Border>
                <Border Height="50">
                    <Border.Background>
                        <LinearGradientBrush PresentationOptions:Freeze="true" EndPoint="0.5,1"
                                             StartPoint="0.5,0">
                            <GradientStop Offset="0"
                                          Color="#00394068" />
                            <GradientStop Offset="1"
                                          Color="#99000000" />
                        </LinearGradientBrush>
                    </Border.Background>
                </Border>

                <Border Grid.Column="0"
                        BorderThickness="0,0,1,1"
                        Height="40"
                        BorderBrush="{StaticResource SearchAreaDarkBorderBrush}"
                        Background="{StaticResource SearchAreaBackground}"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Width="700">
                    <Border BorderBrush="{StaticResource SearchAreaLightBorderBrush}"
                            BorderThickness="1,1,0,0">
                        <StackPanel Height="Auto"
                                    Orientation="Horizontal"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center">
                            <HTextBlock TextWrapping="Wrap"
                                        Text="등록번호"
                                        VerticalAlignment="Center"
                                        FontSize="16"
                                        Foreground="{StaticResource TextHighlightForeground}" />
                            <HTextBox x:Name="txtPT_NO"
                                      Height="23"
                                      TextWrapping="Wrap"
                                      VerticalAlignment="Center"
                                      Width="90"
                                      Margin="5,0,0,0"
                                      FontSize="16"
                                      Padding="3,1,1,1"
                                      MaxLength="8"
                                      Text="{Binding PatientInformation.PT_NO,UpdateSourceTrigger=PropertyChanged,Mode=OneWay}"
                                      IsEnabled="{Binding PatientSelectAuthority}">
                                <HTextBox.InputBindings>
                                    <KeyBinding Key="ENTER"
                                                Command="{Binding SelectPatientCommand}" />
                                </HTextBox.InputBindings>
                            </HTextBox>
                            <HButton Content="HButton"
                                     ButtonTyped="None"
                                     VerticalAlignment="Center"
                                     ButtonStyleType="SearchSingle"
                                     Margin="5,0,0,0"
                                     Command="{Binding SelectPatientCommand}"
                                     IsEnabled="{Binding PatientSelectAuthority}" />
                            <HTextBlock TextWrapping="Wrap"
                                        VerticalAlignment="Center"
                                        Margin="20,0,0,0"
                                        FontSize="16"
                                        Foreground="{StaticResource TextHighlightForeground}">
                                <Run Language="ko-kr"
                                     Text="환자명" />
                                <Run Text=" : " />
                                <!--<Run Language="ko-kr"
                                     Text="{Binding PatientInformation.PT_NM}" />-->
                            </HTextBlock>
                            <HTextBox x:Name="txtPT_NM"
                                      Height="23"
                                      TextWrapping="NoWrap"
                                      VerticalAlignment="Center"
                                      Width="90"
                                      Margin="5,0,0,0"
                                      FontSize="16"
                                      Padding="3,1,1,1"
                                      Text="{Binding PatientInformation.PT_NM}"
                                      IsReadOnly="True"
                                      Background="Transparent"
                                      ToolTip="{Binding PatientInformation.PT_NM}">

                            </HTextBox>
                            <HTextBlock TextWrapping="Wrap"
                                        VerticalAlignment="Center"
                                        Margin="20,0,0,0"
                                        FontSize="16"
                                        Foreground="{StaticResource TextHighlightForeground}">
                                <Run Language="ko-kr"
                                     Text="성별" />
                                <Run Text=" : " />
                                <Run Language="ko-kr"
                                     Text="{Binding PatientInformation.SEX}" />
                            </HTextBlock>
                            <HTextBlock TextWrapping="Wrap"
                                        VerticalAlignment="Center"
                                        Margin="20,0,0,0"
                                        FontSize="16"
                                        Foreground="{StaticResource TextHighlightForeground}">
                                <Run Language="ko-kr"
                                     Text="나이" />
                                <Run Text=" : " />
                                <Run Language="ko-kr"
                                     Text="{Binding PatientInformation.AGE}" />
                            </HTextBlock>
                            <HPopup IsOpen="{Binding IsOpenPopup}"
                                    PopupAnimation="Fade"
                                    AllowsTransparency="True"
                                    Placement="Left"
                                    PlacementTarget="{Binding ElementName=flowDocViewer}">
                                <ScrollViewer>
                                    <form:MedicalTreatmentFormPanel x:Name="mtfPanel"
                                                                    Visibility="Visible"
                                                                    DockPanel.Dock="Right"
                                                                    Width="600">
                                    </form:MedicalTreatmentFormPanel>
                                </ScrollViewer>
                            </HPopup>
                        </StackPanel>

                    </Border>
                </Border>
                <StackPanel Height="Auto"
                            Orientation="Horizontal"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Margin="0,0,5,0">

                    <HButton Content="DC"
                             ButtonTyped="None"
                             VerticalAlignment="Center"
                             Background="{StaticResource ButtonRoyalBlueBackground}"
                             HorizontalAlignment="Right"
                             Visibility="{Binding InCompleteVisibility}"
                             Command="{Binding SelectDCRecordCurrentCommand}"
                             ToolTip="DC된 기록을 조회합니다"
                             Margin="5,0,0,0" Width="40" />
                    <HButton Content="미작성"
                             ButtonTyped="None"
                             VerticalAlignment="Center"
                             Background="{StaticResource ButtonRoyalBlueBackground}"
                             HorizontalAlignment="Right"
                             Visibility="{Binding InCompleteVisibility}"
                             Command="{Binding SaveNonWritingRecordCommand}"
                             ToolTip="미작성 기록을 조회/등록합니다"
                             Margin="5,0,0,0" />
                    <HButton Content="미비"
                             ButtonTyped="None"
                             VerticalAlignment="Center"
                             Background="{StaticResource ButtonRoyalBlueBackground}"
                             HorizontalAlignment="Right"
                             Visibility="{Binding InCompleteVisibility}"
                             Command="{Binding SaveIncompleteRecordCommand}"
                             ToolTip="미비 기록을 조회/등록합니다"
                             Margin="5,0,0,0" Width="40" />
                    <HButton Content="전자서명"
                             ButtonTyped="None"
                             VerticalAlignment="Center"
                             Background="{StaticResource ButtonRoyalBlueBackground}"
                             HorizontalAlignment="Right"
                             Visibility="{Binding InCompleteVisibility}"
                             Command="{Binding SaveElectronicSignatureCommand}"
                             ToolTip="전자서명누락 기록을 조회/등록합니다"
                             Margin="5,0,0,0" />
                </StackPanel>
            </Grid>

        </Border>
        <Border Background="{StaticResource BoundaryLineNormalBackground}"
                BorderBrush="{StaticResource BoundaryLineNormalBorderBrush}"
                BorderThickness="0,0,0,1"
                Grid.Row="1"
                VerticalAlignment="Top"
                Height="2" />
        <Grid Margin="10"
              Grid.Row="1">

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="{Binding ListWidth, UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}"
                                  MinWidth="{Binding ListMinWidth, UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}"
                                  MaxWidth="600" />
                <ColumnDefinition Width="20" />
                <ColumnDefinition Width="{Binding ContentWidth}"/>
            </Grid.ColumnDefinitions>
            <ContentControl Visibility="Collapsed"
                            Content="{StaticResource proxy}" />
            <HTabControl x:Name="tctlSearchRecordList" Padding="0,10">

                <i:Interaction.Triggers>


                    <i:EventTrigger EventName="TabChanged">
                        <i:InvokeCommandAction Command="{Binding TabSelectionChangeCommand}" />
                    </i:EventTrigger>
                </i:Interaction.Triggers>
                <!-- 1.수진일별 기록조회 탭 시작-->
                <HTabItem Header="수진일별 기록조회" Visibility="{Binding AskByHavingAMedicalExaminationTab}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition Height="Auto"
                                           MinHeight="10" />
                        </Grid.RowDefinitions>
                        <Grid x:Name="grdMedicalTreatmentDay">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="{Binding MedicalTreatmentHistoryListHeight}" />
                                <RowDefinition Height="20" />
                                <RowDefinition Height="{Binding MedicalTreatmentDayHeight}" />
                            </Grid.RowDefinitions>
                            <Grid Grid.RowSpan="1">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <Border BorderThickness="0,0,1,1"
                                        Height="40"
                                        BorderBrush="{StaticResource SearchAreaDarkBorderBrush}"
                                        Background="{StaticResource SearchAreaBackground}">
                                    <Border BorderBrush="{StaticResource SearchAreaLightBorderBrush}"
                                            BorderThickness="1,1,0,0">
                                        <StackPanel Orientation="Horizontal" Margin="10,0">
                                            <!--<Border HorizontalAlignment="Right"
                                                        Style="{StaticResource TitleThreeDepthBulletStyle}" />
                                                <HTextBlock Text="수진일"
                                                            HorizontalAlignment="Left"
                                                            VerticalAlignment="Center"
                                                            Margin="5,0,0,0"
                                                            Foreground="{StaticResource TextHighlightForeground}" />
                                                <HFromToCalendar Margin="5,0,0,0"
                                                                 FromDate="{Binding SearchCondition.SEARCH_FROM_DATE}"
                                                                 ToDate="{Binding SearchCondition.SEARCH_TO_DATE}" />

                                                <HComboBox Width="60"
                                                           Margin="5,0,0,0"
                                                           ItemsSource="{Binding Code_Period}"
                                                           SelectedValuePath="COMN_CD"
                                                           DisplayMemberPath="COMN_CD_NM"
                                                           SelectedItem="{Binding SelectedPeriod}">
                                                    <i:Interaction.Triggers>
                                                        <i:EventTrigger EventName="SelectionChanged">
                                                            <i:InvokeCommandAction Command="{Binding SelectPeriodCommand}" />
                                                        </i:EventTrigger>
                                                    </i:Interaction.Triggers>
                                                </HComboBox>-->
                                            <Border HorizontalAlignment="Right"
                                                            Style="{StaticResource TitleThreeDepthBulletStyle}"/>
                                            <HTextBlock Text="환자구분"
                                                                HorizontalAlignment="Left"
                                                                VerticalAlignment="Center"
                                                                Margin="5,0,0,0"
                                                                Foreground="{StaticResource TextHighlightForeground}" />
                                            <HComboBox Width="60"
                                                               Margin="5,0,0,0"
                                                               ItemsSource="{Binding Code_Pact_Type}"
                                                               SelectedValuePath="COMN_CD"
                                                               DisplayMemberPath="COMN_CD_NM"
                                                               SelectedItem="{Binding SelectedPact_Type}">
                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="SelectionChanged">
                                                        <i:InvokeCommandAction Command="{Binding SelectPactTypeCommand}" />
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>
                                            </HComboBox>

                                            <HCheckBox Content="본인" BorderBrush="{StaticResource RCLightBorderBrush}"
                                                               VerticalAlignment="Center"
                                                               HorizontalAlignment="Right"
                                                               IsChecked="{Binding SearchCondition.SELF_CHECK_YN, Converter={StaticResource YesNoToBooleanConverter}}"
                                                               Margin="20,0,0,0" />

                                            <HCheckBox Content="작성된 기록없음" BorderBrush="{StaticResource RCLightBorderBrush}"
                                                               VerticalAlignment="Center"
                                                               HorizontalAlignment="Right"
                                                               IsChecked="{Binding SearchCondition.NORECORD_CHECK_YN, Converter={StaticResource YesNoToBooleanConverter}}"
                                                               Margin="10,0,0,0" />
                                            <!--<StackPanel Grid.Row="1" Orientation="Horizontal"
                                                HorizontalAlignment="Left"
                                                        VerticalAlignment="Center"
                                                        Margin="10,0">
                                                <Border HorizontalAlignment="Right" Style="{StaticResource TitleThreeDepthBulletStyle}"/>
                                               
                                                <HCheckBox Content="작성된 기록없음"
                                                           VerticalAlignment="Center"
                                                           HorizontalAlignment="Right"
                                                           IsChecked="{Binding SearchCondition.NORECORD_CHECK_YN, Converter={StaticResource YesNoToBooleanConverter}}"
                                                           Margin="5,0,0,0" />
                                            </StackPanel>-->
                                            <HButton Content="조회"
                                                         ButtonTyped="Retrive"
                                                         VerticalAlignment="Center"
                                                         ButtonStyleType="Search"
                                                         DockPanel.Dock="Right"
                                                         Command="{Binding SearchMedicalTreatmentHistoryListCommand}"
                                                         ToolTip="수진이력목록을 조회합니다"
                                                         Margin="20,0,0,0" />

                                        </StackPanel>
                                    </Border>
                                </Border>
                                <HDataGridEx AutoGenerateColumns="False"
                                             SelectionMode="Single"
                                             IsReadOnly="True"
                                             SelectionUnit="FullRow"
                                             HeadersVisibility="Column"
                                             ItemsSource="{Binding MedicalTreatmentHistoryList}"
                                             x:Name="dgrdMedicalTreatmentHistoryList"
                                             Grid.Row="1"
                                             Margin="0,10,0,0"
                                             SelectedItem="{Binding SelectedMedicalTreatmentHistory}">
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="SelectionChanged">
                                            <i:InvokeCommandAction Command="{Binding SearchRecordListByMedicalTreatmentDayCommand}" 
                                                                   CommandParameter="AA"/>
                                        </i:EventTrigger>
                                        <i:EventTrigger EventName="MouseEnter">
                                            <i:InvokeCommandAction Command="{Binding SetMedicalTreatmentHistoryListMaxHeightCommand}" />
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                    <HDataGridEx.GroupStyle>
                                        <GroupStyle HidesIfEmpty="False">
                                            <GroupStyle.ContainerStyle>
                                                <Style TargetType="{x:Type GroupItem}">
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="{x:Type GroupItem}">
                                                                <AnimateExpander IsExpanded="False">
                                                                    <AnimateExpander.Header>
                                                                        <ContentPresenter />
                                                                    </AnimateExpander.Header>
                                                                    <ItemsPresenter x:Name="items" />
                                                                </AnimateExpander>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </GroupStyle.ContainerStyle>
                                            <GroupStyle.Panel>
                                                <ItemsPanelTemplate>
                                                    <DataGridRowsPresenter />
                                                </ItemsPanelTemplate>
                                            </GroupStyle.Panel>
                                            <GroupStyle.HeaderTemplate>
                                                <DataTemplate>
                                                    <StackPanel Orientation="Horizontal">
                                                        <HTextBlock FontWeight="Bold"
                                                                    FontSize="12"
                                                                    Foreground="{StaticResource TextHighlightForeground}">
                                                            <Run Text="   " />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text="{Binding Name, Mode=OneWay}" />
                                                        </HTextBlock>
                                                        <HTextBlock FontSize="12"
                                                                    Margin="10,0,0,0"
                                                                    Foreground="{StaticResource TextHighlightForeground}">
                                                            <Run Text="(" />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text="{Binding ItemCount, Mode=OneWay}" />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text=")" />
                                                        </HTextBlock>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </GroupStyle.HeaderTemplate>
                                        </GroupStyle>
                                    </HDataGridEx.GroupStyle>
                                    <HDataGridEx.Columns>
                                        <HDataGridTextColumn Header="진료과"
                                                             Binding="{Binding MED_DEPT_NM}"
                                                             VerticalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="100" />
                                        <HDataGridTemplateColumn Header="환자구분"
                                                                 Width="80"
                                                                 SortMemberPath="PACT_TP_CD">
                                            <HDataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <StackPanel HorizontalAlignment="Center"
                                                                VerticalAlignment="Center">
                                                        <Border Height="20"
                                                                Width="50"
                                                                CornerRadius="5"
                                                                Margin="5"
                                                                BorderThickness="1"
                                                                BorderBrush="{StaticResource BetweenLineNormalBorderBrush}">
                                                            <Border.Style>
                                                                <Style TargetType="Border">
                                                                    <Style.Triggers>
                                                                        <DataTrigger Binding="{Binding PACT_TP_CD}"
                                                                                     Value="O">
                                                                            <Setter Property="Visibility"
                                                                                    Value="Visible" />
                                                                            <Setter Property="Background"
                                                                                    Value="{StaticResource ColorTemplateOutBrush}" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding PACT_TP_CD}"
                                                                                     Value="I">
                                                                            <Setter Property="Visibility"
                                                                                    Value="Visible" />
                                                                            <Setter Property="Background"
                                                                                    Value="{StaticResource ColorTemplateINBrush}" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding PACT_TP_CD}"
                                                                                     Value="E">
                                                                            <Setter Property="Visibility"
                                                                                    Value="Visible" />
                                                                            <Setter Property="Background"
                                                                                    Value="{StaticResource ColorTemplateEMBrush}" />
                                                                        </DataTrigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </Border.Style>
                                                            <HTextBlock FontSize="10.667"
                                                                        TextWrapping="Wrap"
                                                                        VerticalAlignment="Center"
                                                                        HorizontalAlignment="Center"
                                                                        Foreground="{StaticResource TextHighlightForeground}"
                                                                        Text="{Binding PACT_TP_NM}">
                                                            </HTextBlock>
                                                        </Border>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </HDataGridTemplateColumn.CellTemplate>
                                        </HDataGridTemplateColumn>
                                        <HDataGridTextColumn Header="수진시작일"
                                                             Binding="{Binding MED_FROM_DATE, StringFormat=yyyy-MM-dd}"
                                                             VerticalAlignment="Center"
                                                             HorizontalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="80" />
                                        <HDataGridTextColumn Header="수진종료일"
                                                             Binding="{Binding MED_TO_DATE, StringFormat=yyyy-MM-dd}"
                                                             VerticalAlignment="Center"
                                                             HorizontalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="80" />
                                        <HDataGridTextColumn Header="진료의"
                                                             Binding="{Binding MED_DR_NM}"
                                                             VerticalAlignment="Center"
                                                             HorizontalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="80" />
                                        <HDataGridTextColumn Header="기록"
                                                             Binding="{Binding RECORD_YN}"
                                                             VerticalAlignment="Center"
                                                             HorizontalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="40" />
                                    </HDataGridEx.Columns>
                                </HDataGridEx>
                            </Grid>
                            <HGridSplitter HorizontalAlignment="Stretch"
                                           Grid.Row="1"
                                           VerticalAlignment="Center" />
                            <Grid Margin="0"
                                  Grid.Row="2">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"
                                                   MinHeight="37" />
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <Grid Height="30"
                                      Margin="0,0,0,5">
                                    <DockPanel LastChildFill="False">
                                        <StackPanel Orientation="Horizontal">
                                            <Border HorizontalAlignment="Left"
                                                    Style="{StaticResource TitleOneDepthBulletStyle}" />
                                            <HTextBlock Text="기록목록"
                                                        Foreground="{StaticResource TextHighlightForeground}"
                                                        HorizontalAlignment="Left"
                                                        VerticalAlignment="Center"
                                                        Margin="5,0,0,0" />
                                        </StackPanel>
                                        <HButton Content="조회"
                                                 ButtonTyped="Retrive"
                                                 VerticalAlignment="Center"
                                                 ButtonStyleType="Search"
                                                 DockPanel.Dock="Right"
                                                 Command="{Binding SearchMultiRecordContentCommand}"
                                                 CommandParameter="{Binding SelectedRecordListByMedicalTreatmentDay}"
                                                 ToolTip="기록 내용을 조회합니다" />
                                        <HCheckBox Content="이미지 출력" BorderBrush="{StaticResource RCLightBorderBrush}"
                                               HorizontalAlignment="Left"
                                               VerticalAlignment="Center"
                                               DockPanel.Dock="Right"
                                               Margin="0,0,10,0"
                                               IsEnabled ="{Binding IsImagePrintingAsEnabled}" 
                                               Visibility="{Binding ImagePrintingAskVisibility}"
                                               IsChecked="{Binding ImagePrintingAskChecked}">
                                            <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="Checked">
                                                    <i:InvokeCommandAction Command="{Binding ImagePrintingAskCheckedCommand}" />
                                                </i:EventTrigger>
                                                <i:EventTrigger EventName="Unchecked">
                                                    <i:InvokeCommandAction Command="{Binding ImagePrintingAskCheckedCommand}" />
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>
                                        </HCheckBox>
                                        <HCheckBox Content="수술기록 이미지 출력" BorderBrush="{StaticResource RCLightBorderBrush}"
                                               HorizontalAlignment="Left"
                                               VerticalAlignment="Center"
                                               DockPanel.Dock="Right"
                                               Margin="0,0,10,0"
                                               IsEnabled ="{Binding IsImageOperationPrintingAsEnabled}" 
                                               Visibility="{Binding OperationimagePrintingAskVisibility}"
                                               IsChecked="{Binding OperationImagePrintingAskChecked}">
                                            <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="Checked">
                                                    <i:InvokeCommandAction Command="{Binding OperationImagePrintingAskCheckedCommand}" />
                                                </i:EventTrigger>
                                                <i:EventTrigger EventName="Unchecked">
                                                    <i:InvokeCommandAction Command="{Binding OperationImagePrintingAskCheckedCommand}" />
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>
                                        </HCheckBox>
                                        <HCheckBox Content="출력용 조회" BorderBrush="{StaticResource RCLightBorderBrush}"                                                  
                                                    DockPanel.Dock="Right"
                                                    VerticalAlignment="Center"
                                                    HorizontalAlignment="Right"                                                 
                                                    Margin="0,0,10,0" 
                                                    Visibility="{Binding PrintingAskVisibility}"
                                                    IsChecked="{Binding PrintingAskChecked}">
                                            <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="Checked">
                                                    <i:InvokeCommandAction Command="{Binding PrintingAskCheckedCommand}" />
                                                </i:EventTrigger>
                                                <i:EventTrigger EventName="Unchecked">
                                                    <i:InvokeCommandAction Command="{Binding PrintingAskCheckedCommand}" />
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>
                                        </HCheckBox>
                                    </DockPanel>
                                    <Border Background="{StaticResource OneDepthTitleLineBackground}"
                                            VerticalAlignment="Bottom"
                                            Height="2" />
                                </Grid>
                                <HDataGridEx x:Name="dgrdRecordListByMedicalTreatmentDay"
                                             AutoGenerateColumns="False"
                                             SelectionMode="Extended"
                                             IsReadOnly="True"
                                             SelectionUnit="FullRow"
                                             HeadersVisibility="All"
                                             Margin="0,0,0,10"
                                             ItemsSource="{Binding RecordListByMedicalTreatmentDay}"
                                             MultiSelectorBehaviors.SynchronizedSelectedItems="{Binding SelectedRecordListByMedicalTreatmentDay, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                             Grid.Row="1">
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="RowDoubleClick">
                                            <i:InvokeCommandAction Command="{Binding SearchMultiRecordContentCommand}"
                                                                   CommandParameter="{Binding SelectedItem, ElementName=dgrdRecordListByMedicalTreatmentDay}" />
                                        </i:EventTrigger>
                                        <i:EventTrigger EventName="MouseEnter">
                                            <i:InvokeCommandAction Command="{Binding SetMedicalTreatmentDayMaxHeightCommand}" />
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                    <HDataGridEx.GroupStyle>
                                        <GroupStyle HidesIfEmpty="False">
                                            <GroupStyle.ContainerStyle>
                                                <Style TargetType="{x:Type GroupItem}">
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="{x:Type GroupItem}">
                                                                <AnimateExpander IsExpanded="False">
                                                                    <AnimateExpander.Header>
                                                                        <ContentPresenter />
                                                                    </AnimateExpander.Header>
                                                                    <ItemsPresenter x:Name="items" />
                                                                </AnimateExpander>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </GroupStyle.ContainerStyle>
                                            <GroupStyle.Panel>
                                                <ItemsPanelTemplate>
                                                    <DataGridRowsPresenter />
                                                </ItemsPanelTemplate>
                                            </GroupStyle.Panel>
                                            <GroupStyle.HeaderTemplate>
                                                <DataTemplate>
                                                    <StackPanel Orientation="Horizontal">
                                                        <HTextBlock FontWeight="Bold"
                                                                    FontSize="12"
                                                                    Foreground="{StaticResource TextHighlightForeground}">
                                                            <Run Text="   " />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text="{Binding Name, Mode=OneWay}" />
                                                        </HTextBlock>
                                                        <HTextBlock FontSize="12"
                                                                    Margin="10,0,0,0"
                                                                    Foreground="{StaticResource TextHighlightForeground}">
                                                            <Run Text="(" />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text="{Binding ItemCount, Mode=OneWay}" />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text=")" />
                                                        </HTextBlock>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </GroupStyle.HeaderTemplate>
                                        </GroupStyle>
                                    </HDataGridEx.GroupStyle>
                                    <HDataGridEx.Columns>
                                        <HDataGridTextColumn Header="환자구분"
                                                             Binding="{Binding PACT_TP_CD, Converter={StaticResource PACT_TP_NMConverter}}"
                                                             VerticalAlignment="Center"
                                                             HorizontalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="60" />
                                        <HDataGridTextColumn Header="항목구분"
                                                             Binding="{Binding ITEM_TYPE}"
                                                             VerticalAlignment="Center"
                                                             HorizontalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="70" />
                                        <HDataGridTextColumn Header="항목명"
                                                             Binding="{Binding ITEM_NM}"
                                                             VerticalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="155">
                                            <HDataGridTextColumn.CellStyle>
                                                <Style TargetType="{x:Type HDataGridCell}">
                                                    <Setter Property="ToolTip"
                                                            Value="{Binding ITEM_NM}" />
                                                </Style>
                                            </HDataGridTextColumn.CellStyle>
                                        </HDataGridTextColumn>
                                        <HDataGridTextColumn Header="작성일자"
                                                             Binding="{Binding WRITING_DATE, StringFormat=yyyy-MM-dd}"
                                                             VerticalAlignment="Center"
                                                             HorizontalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="80" />
                                        <HDataGridTextColumn Header="진료과"
                                                             Binding="{Binding WRITING_DEPT_NM}"
                                                             VerticalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="100" />
                                        <HDataGridTextColumn Header="작성자"
                                                             Binding="{Binding WRITER_NM}"
                                                             HorizontalAlignment="Center"
                                                             VerticalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="65" />
                                        <HDataGridTextColumn Header="서명"
                                                             Binding="{Binding MDRC_WRT_STS_CD_YN}"
                                                             HorizontalAlignment="Center"
                                                             VerticalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="*" />
                                    </HDataGridEx.Columns>
                                </HDataGridEx>
                            </Grid>
                        </Grid>

                        <HToggleButton Content="정렬"
                                       x:Name="hToggleButton1"
                                       Template="{StaticResource CommonExpandButtonTemplateKey}"
                                       HorizontalContentAlignment="Stretch"
                                       VerticalAlignment="Top"
                                       Grid.Row="1"
                                       Tag="Up" />
                        <AnimateExpander IsExpanded="{Binding IsChecked, ElementName=hToggleButton1}"
                                         Grid.Row="1"
                                         HeaderVisibility="Collapsed"
                                         Margin="0,15,0,0">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="30" />
                                    <RowDefinition Height="30" />
                                </Grid.RowDefinitions>
                                <StackPanel Orientation="Horizontal"
                                            Grid.ColumnSpan="2"
                                            VerticalAlignment="Center"
                                            Margin="10,0">
                                    <Border HorizontalAlignment="Right"
                                            Style="{StaticResource TitleThreeDepthBulletStyle}" />
                                    <HTextBlock TextWrapping="Wrap"
                                                Text="목록조회"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                Margin="5,0,0,0"
                                                Foreground="{StaticResource TextHighlightForeground}" />
                                    <RadioButtonList ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                     VerticalAlignment="Center"
                                                     ItemMargin="5,0,0,0"
                                                     Grid.Column="1"
                                                     Grid.Row="1"
                                                     ItemsSource="{Binding Code_ListSort_Type}"
                                                     SelectedValuePath="COMN_CD"
                                                     DisplayMemberPath="COMN_CD_NM"
                                                     SelectedItem="{Binding SelectedListSort_Type}">
                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="SelectionChanged">
                                                <i:InvokeCommandAction Command="{Binding SelectListSortTypeCommand}"
                                                                       CommandParameter="{Binding RecordListByMedicalTreatmentDay}" />
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>
                                    </RadioButtonList>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal"
                                            Grid.Row="1"
                                            Grid.ColumnSpan="2"
                                            VerticalAlignment="Center"
                                            Margin="10,0">
                                    <Border HorizontalAlignment="Right"
                                            Style="{StaticResource TitleThreeDepthBulletStyle}" />
                                    <HTextBlock TextWrapping="Wrap"
                                                Text="내용조회"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                Margin="5,0,0,0"
                                                Foreground="{StaticResource TextHighlightForeground}" />
                                    <RadioButtonList ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                     VerticalAlignment="Center"
                                                     ItemMargin="5,0,0,0"
                                                     Grid.Column="1"
                                                     Grid.Row="1"
                                                     ItemsSource="{Binding Code_ContentSort_Type}"
                                                     SelectedValuePath="COMN_CD"
                                                     DisplayMemberPath="COMN_CD_NM"
                                                     SelectedItem="{Binding SelectedContentListSort_Type}" />
                                </StackPanel>
                            </Grid>
                        </AnimateExpander>
                    </Grid>
                </HTabItem>
                <!-- 1.수진일별 기록조회 탭 끝-->
                <!-- 2.조건별 상세조회 탭 시작-->
                <HTabItem Header="조건별 상세조회" Visibility="{Binding AskByConditionTab}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="250" />
                            <RowDefinition Height="20" />
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto"
                                               MinHeight="10" />
                        </Grid.RowDefinitions>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="0.65*" />
                                <ColumnDefinition Width="10" />
                                <ColumnDefinition Width="0.35*" />
                            </Grid.ColumnDefinitions>
                            <Grid Height="30"
                                      Margin="0,0,0,5"
                                      Grid.Column="2">
                                <StackPanel Orientation="Horizontal">
                                    <Border HorizontalAlignment="Left"
                                                Style="{StaticResource TitleOneDepthBulletStyle}" />
                                    <HTextBlock Text="기록유형"
                                                    Foreground="{StaticResource TextHighlightForeground}"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Center"
                                                    Margin="5,0,0,0" />
                                </StackPanel>
                                <Border Background="{StaticResource OneDepthTitleLineBackground}"
                                            VerticalAlignment="Bottom"
                                            Height="2" />
                            </Grid>
                            <HDataGridEx x:Name="dgrdRecordTypeList"
                                             Grid.Row="1"
                                             Grid.Column="2"
                                             Grid.RowSpan="3"
                                             AutoGenerateColumns="False"
                                             SelectionMode="Extended"
                                             IsReadOnly="True"
                                             SelectionUnit="FullRow"
                                             HeadersVisibility="All"
                                             ItemsSource="{Binding Code_Record_Type}"
                                             SelectedValuePath="COMN_CD"
                                             DisplayMemberPath="COMN_CD_NM"
                                             MultiSelectorBehaviors.SynchronizedSelectedItems="{Binding SelectedRecordTypeList, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="RowDoubleClick">
                                        <i:InvokeCommandAction Command="{Binding SearchRecordListByConditionCommand}" />
                                    </i:EventTrigger>
                                    <i:EventTrigger EventName="SelectionChanged">
                                        <i:InvokeCommandAction Command="{Binding SelectRecordTypeCommand}"
                                                                   CommandParameter="{Binding SelectedItem, ElementName=dgrdRecordTypeList}" />
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                                <HDataGridEx.Columns>
                                    <HDataGridTextColumn Header="기록유형"
                                                             Binding="{Binding COMN_CD_NM}"
                                                             VerticalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="70" />
                                    <HDataGridTemplateColumn Header=""
                                                             IsReadOnly="True"
                                                             Width="100">
                                        <HDataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <StackPanel Orientation="Vertical"
                                                            Margin="0,0,5,0"
                                                            VerticalAlignment="Center">
                                                    <HCheckBox Content="수행사인 포함"
                                                               IsChecked="{Binding DataContext.ActingSign, RelativeSource={RelativeSource AncestorType={x:Type UserControl}, Mode=FindAncestor}}"
                                                               VerticalAlignment="Center"
                                                               Margin="0,5,0,0">
                                                        <HCheckBox.Style>
                                                            <Style TargetType="{x:Type HCheckBox}">
                                                                <Setter Property="Visibility"
                                                                        Value="Collapsed" />
                                                                <Style.Triggers>
                                                                    <MultiDataTrigger>
                                                                        <MultiDataTrigger.Conditions>
                                                                            <Condition Binding="{Binding COMN_CD}"
                                                                                       Value="OR" />
                                                                        </MultiDataTrigger.Conditions>
                                                                        <Setter Property="Visibility"
                                                                                Value="Visible" />
                                                                    </MultiDataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </HCheckBox.Style>
                                                    </HCheckBox>
                                                    <HCheckBox Content="이력포함"
                                                               IsChecked="{Binding DataContext.IsIncludeOrderHistory, RelativeSource={RelativeSource AncestorType={x:Type UserControl}, Mode=FindAncestor}}"
                                                               VerticalAlignment="Center"
                                                               Margin="0,5,0,5">
                                                        <HCheckBox.Style>
                                                            <Style TargetType="{x:Type HCheckBox}">
                                                                <Setter Property="Visibility"
                                                                        Value="Collapsed" />
                                                                <Style.Triggers>
                                                                    <MultiDataTrigger>
                                                                        <MultiDataTrigger.Conditions>
                                                                            <Condition Binding="{Binding COMN_CD}"
                                                                                       Value="OR" />
                                                                        </MultiDataTrigger.Conditions>
                                                                        <Setter Property="Visibility"
                                                                                Value="Visible" />
                                                                    </MultiDataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </HCheckBox.Style>
                                                    </HCheckBox>
                                                    <HCheckBox Content="취소수진 포함"
                                                               IsChecked="{Binding DataContext.ApcnDtm, RelativeSource={RelativeSource AncestorType={x:Type UserControl}, Mode=FindAncestor}}"
                                                               VerticalAlignment="Center" >
                                                        <HCheckBox.Style>
                                                            <Style TargetType="{x:Type HCheckBox}">
                                                                <Setter Property="Visibility"
                                                                        Value="Collapsed" />
                                                                <Style.Triggers>
                                                                    <MultiDataTrigger>
                                                                        <MultiDataTrigger.Conditions>
                                                                            <Condition Binding="{Binding COMN_CD}"
                                                                                       Value="NR" />
                                                                        </MultiDataTrigger.Conditions>
                                                                        <Setter Property="Visibility"
                                                                                Value="Visible" />
                                                                    </MultiDataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </HCheckBox.Style>
                                                    </HCheckBox>
                                                </StackPanel>
                                            </DataTemplate>
                                        </HDataGridTemplateColumn.CellTemplate>
                                    </HDataGridTemplateColumn>
                                </HDataGridEx.Columns>
                            </HDataGridEx>
                            <Grid Height="30"
                                      Margin="0,0,0,5">
                                <StackPanel Orientation="Horizontal">
                                    <Border HorizontalAlignment="Left"
                                                Style="{StaticResource TitleOneDepthBulletStyle}" />
                                    <HTextBlock Text="조회조건"
                                                    Foreground="{StaticResource TextHighlightForeground}"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Center"
                                                    Margin="5,0,0,0" />
                                </StackPanel>
                                <Border Background="{StaticResource OneDepthTitleLineBackground}"
                                            VerticalAlignment="Bottom"
                                            Height="2" />
                            </Grid>
                            <Grid Margin="0,0,0,-2"
                                      Grid.Row="1">
                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                    <RowDefinition Height="30" />
                                </Grid.RowDefinitions>
                                <Border BorderThickness="0,0,1,1"
                                            BorderBrush="{StaticResource SearchAreaDarkBorderBrush}"
                                            Background="{StaticResource SearchAreaBackground}">
                                    <Border BorderBrush="{StaticResource SearchAreaLightBorderBrush}"
                                                BorderThickness="1,1,0,0">
                                        <Grid Margin="5,5">
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />

                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"
                                                                      MinWidth="70" />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>
                                            <StackPanel Orientation="Horizontal"
                                                            Margin="0,0,5,0"
                                                            VerticalAlignment="Center">
                                                <Border HorizontalAlignment="Right"
                                                            Style="{StaticResource TitleThreeDepthBulletStyle}" />
                                                <HTextBlock Text="기록일자"
                                                                HorizontalAlignment="Left"
                                                                VerticalAlignment="Center"
                                                                Margin="5,0,0,0"
                                                                Foreground="{StaticResource TextHighlightForeground}" />
                                            </StackPanel>
                                            <StackPanel Grid.Column="1"
                                                            Orientation="Horizontal">
                                                <HFromToCalendar Margin="0,0,0,-1"
                                                                     FromDate="{Binding SearchCondition.SEARCH_FROM_DATE}"
                                                                     ToDate="{Binding SearchCondition.SEARCH_TO_DATE}" />
                                                <HComboBox Width="60"
                                                               VerticalAlignment="Center"
                                                               Margin="5,0,0,0"
                                                               ItemsSource="{Binding Code_Period}"
                                                               SelectedValuePath="COMN_CD"
                                                               DisplayMemberPath="COMN_CD_NM"
                                                              SelectedValue="{Binding SelectedPeriodValue}"
                                                               SelectedItem="{Binding SelectedPeriod}">
                                                    <i:Interaction.Triggers>
                                                        <i:EventTrigger EventName="SelectionChanged">
                                                            <i:InvokeCommandAction Command="{Binding SelectPeriodCommand}" />
                                                        </i:EventTrigger>
                                                    </i:Interaction.Triggers>
                                                </HComboBox>
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal"
                                                            HorizontalAlignment="Left"
                                                            Grid.Row="1"
                                                            VerticalAlignment="Center"
                                                            Margin="0,0,5,0">
                                                <Border HorizontalAlignment="Right"
                                                            Style="{StaticResource TitleThreeDepthBulletStyle}" />
                                                <HTextBlock Text="환자구분"
                                                                HorizontalAlignment="Left"
                                                                VerticalAlignment="Center"
                                                                Margin="5,0,0,0"
                                                                Foreground="{StaticResource TextHighlightForeground}" />
                                            </StackPanel>
                                            <RadioButtonList ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                                 VerticalAlignment="Center"
                                                                 ItemMargin="5,0,0,0"
                                                                 Grid.Column="1"
                                                                 Grid.Row="1"
                                                                 ItemsSource="{Binding Code_Pact_Type}"
                                                                 SelectedValuePath="COMN_CD"
                                                                 DisplayMemberPath="COMN_CD_NM"
                                                                 SelectedItem="{Binding SelectedPact_Type}">
                                                <!--<RadioButtonListItem Content="전체"
                                                                 IsSelected="True" />
                                            <RadioButtonListItem Content="외래" />
                                            <RadioButtonListItem Content="입원" />
                                            <RadioButtonListItem Content="응급" />-->
                                            </RadioButtonList>
                                            <StackPanel Orientation="Horizontal"
                                                            HorizontalAlignment="Left"
                                                            Grid.Row="2"
                                                            VerticalAlignment="Center"
                                                            Margin="0,0,5,0">
                                                <Border HorizontalAlignment="Right"
                                                            Style="{StaticResource TitleThreeDepthBulletStyle}" />
                                                <HTextBlock Text="진료과"
                                                                HorizontalAlignment="Left"
                                                                VerticalAlignment="Center"
                                                                Margin="5,0,0,0"
                                                                Foreground="{StaticResource TextHighlightForeground}" />
                                            </StackPanel>
                                            <StackPanel Grid.Column="1"
                                                            Orientation="Horizontal"
                                                            Grid.Row="2">
                                                <RadioButtonList ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                                     VerticalAlignment="Center"
                                                                     ItemMargin="5,0,0,0"
                                                                     Grid.Column="1"
                                                                     Grid.Row="1"
                                                                     ItemsSource="{Binding Code_Dept_Type}"
                                                                     SelectedValuePath="COMN_CD"
                                                                     DisplayMemberPath="COMN_CD_NM"
                                                                     SelectedItem="{Binding SelectedDept_Type}">
                                                    <!--<RadioButtonListItem Content="전체"
                                                                     IsSelected="True" />
                                                <RadioButtonListItem Content="수진과" />
                                                <RadioButtonListItem Content="작성과"/>-->
                                                </RadioButtonList>
                                                <HComboBox x:Name="cbxDept"
                                                               Width="130"
                                                               AutoComplate="True"
                                                               ItemsSource="{Binding DepartmentGroup}"
                                                               SelectedValuePath="DEPT_CD"
                                                               DisplayMemberPath="DEPT_NM"
                                                               SelectedItem="{Binding SelectedDepartment, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                               VerticalAlignment="Center">
                                                    <i:Interaction.Triggers>
                                                        <i:EventTrigger EventName="SelectionChanged">
                                                            <i:InvokeCommandAction Command="{Binding SelectDepartmentCommand}" />
                                                        </i:EventTrigger>
                                                    </i:Interaction.Triggers>
                                                    <HComboBox.InputBindings>
                                                        <KeyBinding Key="ENTER"
                                                                        Command="{Binding SetDepartmentCommand}"
                                                                        CommandParameter="{Binding Text, ElementName=cbxDept}" />
                                                    </HComboBox.InputBindings>
                                                </HComboBox>
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal"
                                                            HorizontalAlignment="Left"
                                                            Grid.Row="3"
                                                            VerticalAlignment="Center"
                                                            Margin="0,0,5,0">
                                                <Border HorizontalAlignment="Right"
                                                            Style="{StaticResource TitleThreeDepthBulletStyle}" />
                                                <HTextBlock Text="작성자"
                                                                HorizontalAlignment="Left"
                                                                VerticalAlignment="Center"
                                                                Margin="5,0,0,0"
                                                                Foreground="{StaticResource TextHighlightForeground}" />
                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal"
                                                            HorizontalAlignment="Left"
                                                            Grid.Row="3"
                                                            Grid.Column="1"
                                                            VerticalAlignment="Center">
                                                <RadioButtonList ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                                     VerticalAlignment="Center"
                                                                     ItemMargin="5,0,0,0"
                                                                     Grid.Column="1"
                                                                     Grid.Row="1"
                                                                     ItemsSource="{Binding Code_WRTR_Type}"
                                                                     SelectedValuePath="COMN_CD"
                                                                     DisplayMemberPath="COMN_CD_NM"
                                                                     SelectedItem="{Binding SelectedWRTR_Type}">
                                                    <!--<RadioButtonListItem Content="전체"
                                                                     IsSelected="True" />
                                                <RadioButtonListItem Content="본인"/>
                                                <RadioButtonListItem Content="조회">-->
                                                </RadioButtonList>
                                                <rpcoreui:RPSearchStaffNoCommonALL HorizontalAlignment="Right"
                                                                                    x:Name="rPRPSearchStaffNoCommon"
                                                                                    VerticalAlignment="Top"
                                                                                    Width="165" />
                                                <!--RPSearchStaffNoCommonALL 
                                                        RPSearchStaff-->


                                            </StackPanel>
                                            <StackPanel Orientation="Horizontal"
                                                            HorizontalAlignment="Left"
                                                            Grid.Row="4"
                                                            VerticalAlignment="Center"
                                                            Margin="0,0,5,0">
                                                <Border HorizontalAlignment="Right"
                                                            Style="{StaticResource TitleThreeDepthBulletStyle}" />
                                                <HTextBlock Text="상세유형"
                                                                HorizontalAlignment="Left"
                                                                VerticalAlignment="Center"
                                                                Margin="5,0,0,0"
                                                                Foreground="{StaticResource TextHighlightForeground}" />
                                            </StackPanel>
                                            <HComboBox Grid.Column="1"
                                                           Grid.Row="4"
                                                           Margin="0,0,5,0"
                                                           VerticalAlignment="Center">
                                                <HDataGridEx AutoGenerateColumns="False"
                                                                 SelectionMode="Extended"
                                                                 IsReadOnly="True"
                                                                 SelectionUnit="FullRow"
                                                                 HeadersVisibility="All"
                                                                 ItemsSource="{Binding Code_RecordDetail_Type}"
                                                                 MultiSelectorBehaviors.SynchronizedSelectedItems="{Binding SelectedRecordDetailTypeList, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                    <HDataGridEx.Columns>
                                                        <HDataGridTextColumn Header="기록명"
                                                                                 Binding="{Binding COMN_CD_NM}"
                                                                                 VerticalAlignment="Center"
                                                                                 TextTrimming="CharacterEllipsis"
                                                                                 Width="150" />
                                                        <HDataGridTextColumn Header="기록유형"
                                                                                 Binding="{Binding COMN_CD_EXPL}"
                                                                                 VerticalAlignment="Center"
                                                                                 TextTrimming="CharacterEllipsis"
                                                                                 Width="100" />
                                                    </HDataGridEx.Columns>
                                                </HDataGridEx>
                                            </HComboBox>
                                            <Border Background="{StaticResource SearchAreaBoundaryLineBackground}"
                                                        BorderBrush="{StaticResource SearchAreaBoundaryLineBorderBrush}"
                                                        BorderThickness="0,0,0,1"
                                                        Height="2"
                                                        VerticalAlignment="Top"
                                                        Grid.ColumnSpan="2"
                                                        Grid.Row="1"
                                                        Margin="-5,0" />
                                            <Border Background="{StaticResource SearchAreaBoundaryLineBackground}"
                                                        BorderBrush="{StaticResource SearchAreaBoundaryLineBorderBrush}"
                                                        BorderThickness="0,0,0,1"
                                                        Height="2"
                                                        VerticalAlignment="Top"
                                                        Grid.ColumnSpan="2"
                                                        Grid.Row="2"
                                                        Margin="-5,0" />
                                            <Border Background="{StaticResource SearchAreaBoundaryLineBackground}"
                                                        BorderBrush="{StaticResource SearchAreaBoundaryLineBorderBrush}"
                                                        BorderThickness="0,0,0,1"
                                                        Height="2"
                                                        VerticalAlignment="Top"
                                                        Grid.ColumnSpan="2"
                                                        Grid.Row="3"
                                                        Margin="-5,0" />
                                            <Border Background="{StaticResource SearchAreaBoundaryLineBackground}"
                                                        BorderBrush="{StaticResource SearchAreaBoundaryLineBorderBrush}"
                                                        BorderThickness="0,0,0,1"
                                                        Height="2"
                                                        VerticalAlignment="Top"
                                                        Grid.ColumnSpan="2"
                                                        Grid.Row="4"
                                                        Margin="-5,0" />

                                        </Grid>
                                    </Border>
                                </Border>


                                <HButton Content="목록조회"
                                             ButtonTyped="Retrive"
                                             VerticalAlignment="Center"
                                             ButtonStyleType="Search"
                                             HorizontalAlignment="Right"
                                             d:LayoutOverrides="GridBox"
                                             Grid.Row="1"
                                             Command="{Binding SearchRecordListByConditionCommand}" />
                            </Grid>
                        </Grid>
                        <HGridSplitter HorizontalAlignment="Stretch"
                                           Grid.Row="1"
                                           VerticalAlignment="Center" />
                        <Grid Grid.Row="2">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"
                                                   MinHeight="37" />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <Grid Height="30"
                                      Margin="0,0,0,5">
                                <DockPanel LastChildFill="False">
                                    <StackPanel Orientation="Horizontal">
                                        <Border HorizontalAlignment="Left"
                                                    Style="{StaticResource TitleOneDepthBulletStyle}" />
                                        <HTextBlock Text="기록목록"
                                                        Foreground="{StaticResource TextHighlightForeground}"
                                                        HorizontalAlignment="Left"
                                                        VerticalAlignment="Center"
                                                        Margin="5,0,0,0" />
                                    </StackPanel>
                                    <HTextBlock Text="전체:"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Center"
                                                    Margin="10,0,0,0"
                                                    Foreground="{StaticResource TextHighlightForeground}" />
                                    <HTextBlock Text="{Binding RecordListByCondition.Count}"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Center"
                                                    Margin="5,0,0,0"
                                                    Foreground="{StaticResource TextHighlightForeground}" />
                                    <HTextBlock Text="선택:"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Center"
                                                    Margin="20,0,0,0"
                                                    Foreground="{StaticResource TextHighlightForeground}" />
                                    <HTextBlock Text="{Binding SelectedRecordListByCondition.Count}"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Center"
                                                    Margin="5,0,0,0"
                                                    Foreground="{StaticResource TextHighlightForeground}" />
                                    <HTextBlock Text="조회:"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Center"
                                                    Margin="20,0,0,0"
                                                    Foreground="{StaticResource TextHighlightForeground}" />
                                    <HTextBlock Text="{Binding PrintedRecordList.Count}"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Center"
                                                    Margin="5,0,0,0"
                                                    Foreground="{StaticResource TextHighlightForeground}" />
                                    <HButton Content="조회"
                                                 ButtonTyped="Retrive"
                                                 VerticalAlignment="Center"
                                                 ButtonStyleType="Search"
                                                 DockPanel.Dock="Right"
                                                 Margin="5,0,5,0"
                                                 Command="{Binding SearchMultiRecordContentCommand}"
                                                 CommandParameter="{Binding SelectedRecordListByCondition}"
                                                 ToolTip="기록 내용을 조회합니다" />
                                    <HCheckBox Content="이미지 출력" BorderBrush="{StaticResource RCLightBorderBrush}"
                                               HorizontalAlignment="Left"
                                               VerticalAlignment="Center"
                                               DockPanel.Dock="Right"
                                               Margin="0,0,10,0"
                                               IsEnabled ="{Binding IsImagePrintingAsEnabled}" 
                                               Visibility="{Binding ImagePrintingAskVisibility}"
                                               IsChecked="{Binding ImagePrintingAskChecked}">
                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="Checked">
                                                <i:InvokeCommandAction Command="{Binding ImagePrintingAskCheckedCommand}" />
                                            </i:EventTrigger>
                                            <i:EventTrigger EventName="Unchecked">
                                                <i:InvokeCommandAction Command="{Binding ImagePrintingAskCheckedCommand}" />
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>
                                    </HCheckBox>
                                    <HCheckBox Content="수술기록 이미지 출력" BorderBrush="{StaticResource RCLightBorderBrush}"
                                               HorizontalAlignment="Left"
                                               VerticalAlignment="Center"
                                               DockPanel.Dock="Right"
                                               Margin="0,0,10,0"
                                               IsEnabled ="{Binding IsImageOperationPrintingAsEnabled}" 
                                               Visibility="{Binding OperationimagePrintingAskVisibility}"
                                               IsChecked="{Binding OperationImagePrintingAskChecked}">
                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="Checked">
                                                <i:InvokeCommandAction Command="{Binding OperationImagePrintingAskCheckedCommand}" />
                                            </i:EventTrigger>
                                            <i:EventTrigger EventName="Unchecked">
                                                <i:InvokeCommandAction Command="{Binding OperationImagePrintingAskCheckedCommand}" />
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>
                                    </HCheckBox>
                                    <HCheckBox Content="출력용 조회" BorderBrush="{StaticResource RCLightBorderBrush}"
                                                DockPanel.Dock="Right"
                                                VerticalAlignment="Center"
                                                HorizontalAlignment="Right" 
                                                Margin="0,0,5,0" 
                                                Visibility="{Binding PrintingAskVisibility}"
                                                IsChecked="{Binding PrintingAskChecked}">
                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="Checked">
                                                <i:InvokeCommandAction Command="{Binding PrintingAskCheckedCommand}" />
                                            </i:EventTrigger>
                                            <i:EventTrigger EventName="Unchecked">
                                                <i:InvokeCommandAction Command="{Binding PrintingAskCheckedCommand}" />
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>
                                    </HCheckBox>
                                    <HCheckBox Content="검체 한글명 병기" BorderBrush="{StaticResource RCLightBorderBrush}"
                                                DockPanel.Dock="Right"
                                                VerticalAlignment="Center"
                                                HorizontalAlignment="Right" 
                                                Margin="0,0,5,0" 
                                                IsChecked="{Binding SpcmKorInscrChecked}" />
                                    <HCheckBox Content="영문조회" BorderBrush="{StaticResource RCLightBorderBrush}"
                                               HorizontalAlignment="Left"
                                               VerticalAlignment="Center"
                                               DockPanel.Dock="Right"
                                               Margin="0,0,5,0"
                                               IsChecked="{Binding EngAskChecked}" />
                                </DockPanel>
                                <Border Background="{StaticResource OneDepthTitleLineBackground}"
                                            VerticalAlignment="Bottom"
                                            Height="2" />
                            </Grid>
                            <HDataGridEx x:Name="dgrdRecordListByCondition"
                                             AutoGenerateColumns="False"
                                             SelectionMode="Extended"
                                             IsReadOnly="True"
                                             SelectionUnit="FullRow"
                                             HeadersVisibility="All"
                                             ItemsSource="{Binding RecordListByCondition}"
                                             MultiSelectorBehaviors.SynchronizedSelectedItems="{Binding SelectedRecordListByCondition, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                             Grid.Row="1">

                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="RowDoubleClick">
                                        <i:InvokeCommandAction Command="{Binding SearchMultiRecordContentCommand}"
                                                                   CommandParameter="{Binding SelectedItem, ElementName=dgrdRecordListByCondition}" />
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                                <HDataGridEx.GroupStyle>
                                    <GroupStyle HidesIfEmpty="False">
                                        <GroupStyle.ContainerStyle>
                                            <Style TargetType="{x:Type GroupItem}">
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="{x:Type GroupItem}">
                                                            <AnimateExpander IsExpanded="False">
                                                                <AnimateExpander.Header>
                                                                    <ContentPresenter />
                                                                </AnimateExpander.Header>
                                                                <ItemsPresenter x:Name="items" />
                                                            </AnimateExpander>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </GroupStyle.ContainerStyle>
                                        <GroupStyle.Panel>
                                            <ItemsPanelTemplate>
                                                <DataGridRowsPresenter />
                                            </ItemsPanelTemplate>
                                        </GroupStyle.Panel>
                                        <GroupStyle.HeaderTemplate>
                                            <DataTemplate>
                                                <StackPanel Orientation="Horizontal">
                                                    <HTextBlock FontWeight="Bold"
                                                                    FontSize="12"
                                                                    Foreground="{StaticResource TextHighlightForeground}">
                                                        <Run Text="   " />
                                                        <Run Text=" " />
                                                        <Run Text="{Binding Name, Mode=OneWay}" />
                                                    </HTextBlock>
                                                    <HTextBlock FontSize="12"
                                                                    Margin="10,0,0,0"
                                                                    Foreground="{StaticResource TextHighlightForeground}">
                                                        <Run Text="(" />
                                                        <Run Text=" " />
                                                        <Run Text="{Binding ItemCount, Mode=OneWay}" />
                                                        <Run Text=" " />
                                                        <Run Text=")" />
                                                    </HTextBlock>
                                                </StackPanel>
                                            </DataTemplate>
                                        </GroupStyle.HeaderTemplate>
                                    </GroupStyle>
                                </HDataGridEx.GroupStyle>
                                <HDataGridEx.Columns>
                                    <HDataGridTextColumn Header="환자구분"
                                                             Binding="{Binding PACT_TP_CD, Converter={StaticResource PACT_TP_NMConverter}}"
                                                             VerticalAlignment="Center"
                                                             HorizontalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="60" />
                                    <HDataGridTextColumn Header="항목구분"
                                                             Binding="{Binding ITEM_TYPE}"
                                                             VerticalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="80" />
                                    <HDataGridTextColumn Header="항목명"
                                                             Binding="{Binding ITEM_NM}"
                                                             VerticalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="140">
                                        <HDataGridTextColumn.CellStyle>
                                            <Style TargetType="{x:Type HDataGridCell}">
                                                <Setter Property="ToolTip"
                                                            Value="{Binding ITEM_NM}" />
                                            </Style>
                                        </HDataGridTextColumn.CellStyle>
                                    </HDataGridTextColumn>
                                    <HDataGridTextColumn Header="작성일자"
                                                             Binding="{Binding WRITING_DATE, StringFormat=yyyy-MM-dd}"
                                                             VerticalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="80" />
                                    <HDataGridTextColumn Header="진료과"
                                                             Binding="{Binding WRITING_DEPT_NM}"
                                                             VerticalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="100" />
                                    <HDataGridTextColumn Header="작성자"
                                                             Binding="{Binding WRITER_NM}"
                                                             VerticalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="60" />
                                    <HDataGridTextColumn Header="서명"
                                                             Binding="{Binding MDRC_WRT_STS_CD_YN}"
                                                             HorizontalAlignment="Center"
                                                             VerticalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="40" />
                                    <HDataGridTextColumn Header="유전자검사"
                                                             Binding="{Binding GENE_EXM_YN}"
                                                             VerticalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="75" />
                                    <HDataGridTextColumn Header="NOTE"
                                                             Binding="{Binding NOTE}"
                                                             VerticalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="75"
                                                             Visibility="Collapsed" />
                                    <HDataGridTextColumn Header="기록ID"
                                                             Binding="{Binding MDRC_ID}"
                                                             VerticalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="75" 
                                                             Visibility="Collapsed" />
                                    <HDataGridTextColumn Header="서식ID"
                                                             Binding="{Binding MDFM_ID}"
                                                             VerticalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="75" 
                                                             Visibility="Collapsed" />
                                </HDataGridEx.Columns>
                            </HDataGridEx>
                        </Grid>
                        <HToggleButton Content="정렬"
                                           x:Name="tbtnSortRecordListByCondition"
                                           Template="{StaticResource CommonExpandButtonTemplateKey}"
                                           HorizontalContentAlignment="Stretch"
                                           VerticalAlignment="Top"
                                           Grid.Row="3"
                                           Tag="Up" />
                        <AnimateExpander IsExpanded="{Binding IsChecked, ElementName=tbtnSortRecordListByCondition}"
                                             Grid.Row="3"
                                             HeaderVisibility="Collapsed"
                                             Margin="0,15,0,0">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="30" />
                                    <RowDefinition Height="30" />
                                </Grid.RowDefinitions>
                                <StackPanel Orientation="Horizontal"
                                                Grid.ColumnSpan="2"
                                                VerticalAlignment="Center"
                                                Margin="10,0">
                                    <Border HorizontalAlignment="Right"
                                                Style="{StaticResource TitleThreeDepthBulletStyle}" />
                                    <HTextBlock TextWrapping="Wrap"
                                                    Text="목록조회"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Center"
                                                    Margin="5,0,5,0"
                                                    Foreground="{StaticResource TextHighlightForeground}" />
                                    <RadioButtonList ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                         VerticalAlignment="Center"
                                                         ItemMargin="5,0,0,0"
                                                         Grid.Column="1"
                                                         Grid.Row="1"
                                                         ItemsSource="{Binding Code_ListSort_Type}"
                                                         SelectedValuePath="COMN_CD"
                                                         DisplayMemberPath="COMN_CD_NM"
                                                         SelectedItem="{Binding SelectedListSort_Type}">
                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="SelectionChanged">
                                                <i:InvokeCommandAction Command="{Binding SelectListByCondtitionSortTypeCommand}"
                                                                           CommandParameter="{Binding RecordListByCondition}" />
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>
                                    </RadioButtonList>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal"
                                                Grid.Row="1"
                                                Grid.ColumnSpan="2"
                                                VerticalAlignment="Center"
                                                Margin="10,0">
                                    <Border HorizontalAlignment="Right"
                                                Style="{StaticResource TitleThreeDepthBulletStyle}" />
                                    <HTextBlock TextWrapping="Wrap"
                                                    Text="내용조회"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Center"
                                                    Margin="5,0,5,0"
                                                    Foreground="{StaticResource TextHighlightForeground}" />
                                    <RadioButtonList ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                         VerticalAlignment="Center"
                                                         ItemMargin="5,0,0,0"
                                                         Grid.Column="1"
                                                         Grid.Row="1"
                                                         ItemsSource="{Binding Code_ContentSort_Type}"
                                                         SelectedValuePath="COMN_CD"
                                                         DisplayMemberPath="COMN_CD_NM"
                                                         SelectedItem="{Binding SelectedContentListSort_Type}" />
                                </StackPanel>
                                <!--<i:Interaction.Triggers>
                                        <i:EventTrigger EventName="MouseLeave">
                                            <i:InvokeCommandAction Command="{Binding ChangeSortRecordListByConditionToggleCommand}" />
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>-->
                            </Grid>
                        </AnimateExpander>
                    </Grid>
                </HTabItem>
                <!-- 2.조건별 상세조회 탭 끝-->
                <!-- 2.5.기록이력조회 탭 시작-->
                <HTabItem Header="기록이력조회" Visibility="{Binding AskByHavingAMedicalExaminationHistoryTab}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition Height="Auto"
                                           MinHeight="10" />
                        </Grid.RowDefinitions>
                        <Grid x:Name="grdMedicalTreatmentDay_1">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="{Binding MedicalTreatmentHistoryListHeight}" />
                                <RowDefinition Height="20" />
                                <RowDefinition Height="{Binding MedicalTreatmentDayHeight}" />
                                <RowDefinition Height="{Binding MedicalTreatmentDayHeight}" />
                            </Grid.RowDefinitions>
                            <Grid Grid.RowSpan="1">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <Border BorderThickness="0,0,1,1"
                                        Height="40"
                                        BorderBrush="{StaticResource SearchAreaDarkBorderBrush}"
                                        Background="{StaticResource SearchAreaBackground}">
                                    <Border BorderBrush="{StaticResource SearchAreaLightBorderBrush}"
                                            BorderThickness="1,1,0,0">
                                        <StackPanel Orientation="Horizontal" Margin="10,0">
                                            <!--<Border HorizontalAlignment="Right"
                                                        Style="{StaticResource TitleThreeDepthBulletStyle}" />
                                                <HTextBlock Text="수진일"
                                                            HorizontalAlignment="Left"
                                                            VerticalAlignment="Center"
                                                            Margin="5,0,0,0"
                                                            Foreground="{StaticResource TextHighlightForeground}" />
                                                <HFromToCalendar Margin="5,0,0,0"
                                                                 FromDate="{Binding SearchCondition.SEARCH_FROM_DATE}"
                                                                 ToDate="{Binding SearchCondition.SEARCH_TO_DATE}" />

                                                <HComboBox Width="60"
                                                           Margin="5,0,0,0"
                                                           ItemsSource="{Binding Code_Period}"
                                                           SelectedValuePath="COMN_CD"
                                                           DisplayMemberPath="COMN_CD_NM"
                                                           SelectedItem="{Binding SelectedPeriod}">
                                                    <i:Interaction.Triggers>
                                                        <i:EventTrigger EventName="SelectionChanged">
                                                            <i:InvokeCommandAction Command="{Binding SelectPeriodCommand}" />
                                                        </i:EventTrigger>
                                                    </i:Interaction.Triggers>
                                                </HComboBox>-->
                                            <Border HorizontalAlignment="Right"
                                                            Style="{StaticResource TitleThreeDepthBulletStyle}"/>
                                            <HTextBlock Text="환자구분"
                                                                HorizontalAlignment="Left"
                                                                VerticalAlignment="Center"
                                                                Margin="5,0,0,0"
                                                                Foreground="{StaticResource TextHighlightForeground}" />
                                            <HComboBox Width="60"
                                                               Margin="5,0,0,0"
                                                               ItemsSource="{Binding Code_Pact_Type}"
                                                               SelectedValuePath="COMN_CD"
                                                               DisplayMemberPath="COMN_CD_NM"
                                                               SelectedItem="{Binding SelectedPact_Type}">
                                                <i:Interaction.Triggers>
                                                    <i:EventTrigger EventName="SelectionChanged">
                                                        <i:InvokeCommandAction Command="{Binding SelectPactTypeCommand}" />
                                                    </i:EventTrigger>
                                                </i:Interaction.Triggers>
                                            </HComboBox>

                                            <HCheckBox Content="본인"
                                                               VerticalAlignment="Center"
                                                               HorizontalAlignment="Right"
                                                               IsChecked="{Binding SearchCondition.SELF_CHECK_YN, Converter={StaticResource YesNoToBooleanConverter}}"
                                                               Margin="20,0,0,0" />

                                            <HCheckBox Content="작성된 기록없음"
                                                               VerticalAlignment="Center"
                                                               HorizontalAlignment="Right"
                                                               IsChecked="{Binding SearchCondition.NORECORD_CHECK_YN, Converter={StaticResource YesNoToBooleanConverter}}"
                                                               Margin="10,0,0,0" />
                                            <!--<StackPanel Grid.Row="1" Orientation="Horizontal"
                                                HorizontalAlignment="Left"
                                                        VerticalAlignment="Center"
                                                        Margin="10,0">
                                                <Border HorizontalAlignment="Right" Style="{StaticResource TitleThreeDepthBulletStyle}"/>
                                               
                                                <HCheckBox Content="작성된 기록없음"
                                                           VerticalAlignment="Center"
                                                           HorizontalAlignment="Right"
                                                           IsChecked="{Binding SearchCondition.NORECORD_CHECK_YN, Converter={StaticResource YesNoToBooleanConverter}}"
                                                           Margin="5,0,0,0" />
                                            </StackPanel>-->
                                            <HButton Content="조회"
                                                         ButtonTyped="Retrive"
                                                         VerticalAlignment="Center"
                                                         ButtonStyleType="Search"
                                                         DockPanel.Dock="Right"
                                                         Command="{Binding SearchMedicalTreatmentHistoryListCommand}"
                                                         ToolTip="수진이력목록을 조회합니다"
                                                         Margin="20,0,0,0" />

                                        </StackPanel>
                                    </Border>
                                </Border>
                                <HDataGridEx AutoGenerateColumns="False"
                                             SelectionMode="Single"
                                             IsReadOnly="True"
                                             SelectionUnit="FullRow"
                                             HeadersVisibility="Column"
                                             ItemsSource="{Binding MedicalTreatmentHistoryList}"
                                             x:Name="dgrdMedicalTreatmentHistoryList_1"
                                             Grid.Row="1"
                                             Margin="0,10,0,0"
                                             SelectedItem="{Binding SelectedMedicalTreatmentHistory_his}">
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="SelectionChanged">
                                            <i:InvokeCommandAction Command="{Binding SearchRecordListByMedicalTreatmentDayCommand}"
                                                                   CommandParameter="BB"/>
                                        </i:EventTrigger>
                                        <i:EventTrigger EventName="MouseEnter">
                                            <i:InvokeCommandAction Command="{Binding SetMedicalTreatmentHistoryListMaxHeightCommand}" />
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                    <HDataGridEx.GroupStyle>
                                        <GroupStyle HidesIfEmpty="False">
                                            <GroupStyle.ContainerStyle>
                                                <Style TargetType="{x:Type GroupItem}">
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="{x:Type GroupItem}">
                                                                <AnimateExpander IsExpanded="False">
                                                                    <AnimateExpander.Header>
                                                                        <ContentPresenter />
                                                                    </AnimateExpander.Header>
                                                                    <ItemsPresenter x:Name="items" />
                                                                </AnimateExpander>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </GroupStyle.ContainerStyle>
                                            <GroupStyle.Panel>
                                                <ItemsPanelTemplate>
                                                    <DataGridRowsPresenter />
                                                </ItemsPanelTemplate>
                                            </GroupStyle.Panel>
                                            <GroupStyle.HeaderTemplate>
                                                <DataTemplate>
                                                    <StackPanel Orientation="Horizontal">
                                                        <HTextBlock FontWeight="Bold"
                                                                    FontSize="12"
                                                                    Foreground="{StaticResource TextHighlightForeground}">
                                                            <Run Text="   " />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text="{Binding Name, Mode=OneWay}" />
                                                        </HTextBlock>
                                                        <HTextBlock FontSize="12"
                                                                    Margin="10,0,0,0"
                                                                    Foreground="{StaticResource TextHighlightForeground}">
                                                            <Run Text="(" />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text="{Binding ItemCount, Mode=OneWay}" />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text=")" />
                                                        </HTextBlock>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </GroupStyle.HeaderTemplate>
                                        </GroupStyle>
                                    </HDataGridEx.GroupStyle>
                                    <HDataGridEx.Columns>
                                        <HDataGridTextColumn Header="진료과"
                                                             Binding="{Binding MED_DEPT_NM}"
                                                             VerticalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="100" />
                                        <HDataGridTemplateColumn Header="환자구분"
                                                                 Width="80"
                                                                 SortMemberPath="PACT_TP_CD">
                                            <HDataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <StackPanel HorizontalAlignment="Center"
                                                                VerticalAlignment="Center">
                                                        <Border Height="20"
                                                                Width="50"
                                                                CornerRadius="5"
                                                                Margin="5"
                                                                BorderThickness="1"
                                                                BorderBrush="{StaticResource BetweenLineNormalBorderBrush}">
                                                            <Border.Style>
                                                                <Style TargetType="Border">
                                                                    <Style.Triggers>
                                                                        <DataTrigger Binding="{Binding PACT_TP_CD}"
                                                                                     Value="O">
                                                                            <Setter Property="Visibility"
                                                                                    Value="Visible" />
                                                                            <Setter Property="Background"
                                                                                    Value="{StaticResource ColorTemplateOutBrush}" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding PACT_TP_CD}"
                                                                                     Value="I">
                                                                            <Setter Property="Visibility"
                                                                                    Value="Visible" />
                                                                            <Setter Property="Background"
                                                                                    Value="{StaticResource ColorTemplateINBrush}" />
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding PACT_TP_CD}"
                                                                                     Value="E">
                                                                            <Setter Property="Visibility"
                                                                                    Value="Visible" />
                                                                            <Setter Property="Background"
                                                                                    Value="{StaticResource ColorTemplateEMBrush}" />
                                                                        </DataTrigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </Border.Style>
                                                            <HTextBlock FontSize="10.667"
                                                                        TextWrapping="Wrap"
                                                                        VerticalAlignment="Center"
                                                                        HorizontalAlignment="Center"
                                                                        Foreground="{StaticResource TextHighlightForeground}"
                                                                        Text="{Binding PACT_TP_NM}">
                                                            </HTextBlock>
                                                        </Border>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </HDataGridTemplateColumn.CellTemplate>
                                        </HDataGridTemplateColumn>
                                        <HDataGridTextColumn Header="수진시작일"
                                                             Binding="{Binding MED_FROM_DATE, StringFormat=yyyy-MM-dd}"
                                                             VerticalAlignment="Center"
                                                             HorizontalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="80" />
                                        <HDataGridTextColumn Header="수진종료일"
                                                             Binding="{Binding MED_TO_DATE, StringFormat=yyyy-MM-dd}"
                                                             VerticalAlignment="Center"
                                                             HorizontalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="80" />
                                        <HDataGridTextColumn Header="진료의"
                                                             Binding="{Binding MED_DR_NM}"
                                                             VerticalAlignment="Center"
                                                             HorizontalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="80" />
                                        <HDataGridTextColumn Header="기록"
                                                             Binding="{Binding RECORD_YN}"
                                                             VerticalAlignment="Center"
                                                             HorizontalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="40" />
                                    </HDataGridEx.Columns>
                                </HDataGridEx>
                            </Grid>
                            <HGridSplitter HorizontalAlignment="Stretch"
                                           Grid.Row="1"
                                           VerticalAlignment="Center" />
                            <Grid Margin="0"
                                  Grid.Row="2">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"
                                                   MinHeight="37" />
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <Grid Height="30"
                                      Margin="0,0,0,5">
                                    <DockPanel LastChildFill="False">
                                        <StackPanel Orientation="Horizontal">
                                            <Border HorizontalAlignment="Left"
                                                    Style="{StaticResource TitleOneDepthBulletStyle}" />
                                            <HTextBlock Text="기록목록"
                                                        Foreground="{StaticResource TextHighlightForeground}"
                                                        HorizontalAlignment="Left"
                                                        VerticalAlignment="Center"
                                                        Margin="5,0,0,0" />
                                        </StackPanel>
                                        <HButton Content="조회"
                                                 ButtonTyped="Retrive"
                                                 VerticalAlignment="Center"
                                                 ButtonStyleType="Search"
                                                 DockPanel.Dock="Right"
                                                 Command="{Binding SearchHistoryRecordContentCommand}"
                                                 CommandParameter="{Binding SelectedRecordListByMedicalTreatmentDay_his}"
                                                 ToolTip="기록 내용을 조회합니다" />
                                        <!--<HCheckBox Content="출력용 조회"                                                   
                                                    DockPanel.Dock="Right"
                                                    VerticalAlignment="Center"
                                                    HorizontalAlignment="Right"                                                 
                                                    Margin="0,0,10,0" 
                                                    Visibility="{Binding PrintingAskVisibility}"
                                                    IsChecked="{Binding PrintingAskChecked}" />-->
                                    </DockPanel>
                                    <Border Background="{StaticResource OneDepthTitleLineBackground}"
                                            VerticalAlignment="Bottom"
                                            Height="2" />
                                </Grid>
                                <HDataGridEx x:Name="dgrdRecordListByMedicalTreatmentDay_1"
                                             AutoGenerateColumns="False"
                                             SelectionMode="Extended"
                                             IsReadOnly="True"
                                             SelectionUnit="FullRow"
                                             HeadersVisibility="All"
                                             Margin="0,0,0,10"
                                             ItemsSource="{Binding RecordListByMedicalTreatmentDay_his}"
                                             MultiSelectorBehaviors.SynchronizedSelectedItems="{Binding SelectedRecordListByMedicalTreatmentDay_his, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                             Grid.Row="1">
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="RowDoubleClick">
                                            <!--<i:InvokeCommandAction Command="{Binding SearchMultiRecordContentCommand}"
                                                                   CommandParameter="{Binding SelectedItem, ElementName=dgrdRecordListByMedicalTreatmentDay}" />-->
                                            <!--<i:InvokeCommandAction Command="{Binding SearchHistoryRecordContentCommand}"
                                                                   CommandParameter="{Binding SelectedItem, ElementName=dgrdRecordListByMedicalTreatmentDay}" />-->
                                            <i:InvokeCommandAction Command="{Binding SearchHistoryRecordContentCommand}"
                                                                   CommandParameter="{Binding SelectedItem, ElementName=dgrdRecordListByMedicalTreatmentDay_1}" />
                                        </i:EventTrigger>
                                        <i:EventTrigger EventName="MouseEnter">
                                            <i:InvokeCommandAction Command="{Binding SetMedicalTreatmentDayMaxHeightCommand}" />
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                    <HDataGridEx.GroupStyle>
                                        <GroupStyle HidesIfEmpty="False">
                                            <GroupStyle.ContainerStyle>
                                                <Style TargetType="{x:Type GroupItem}">
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="{x:Type GroupItem}">
                                                                <AnimateExpander IsExpanded="False">
                                                                    <AnimateExpander.Header>
                                                                        <ContentPresenter />
                                                                    </AnimateExpander.Header>
                                                                    <ItemsPresenter x:Name="items" />
                                                                </AnimateExpander>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </GroupStyle.ContainerStyle>
                                            <GroupStyle.Panel>
                                                <ItemsPanelTemplate>
                                                    <DataGridRowsPresenter />
                                                </ItemsPanelTemplate>
                                            </GroupStyle.Panel>
                                            <GroupStyle.HeaderTemplate>
                                                <DataTemplate>
                                                    <StackPanel Orientation="Horizontal">
                                                        <HTextBlock FontWeight="Bold"
                                                                    FontSize="12"
                                                                    Foreground="{StaticResource TextHighlightForeground}">
                                                            <Run Text="   " />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text="{Binding Name, Mode=OneWay}" />
                                                        </HTextBlock>
                                                        <HTextBlock FontSize="12"
                                                                    Margin="10,0,0,0"
                                                                    Foreground="{StaticResource TextHighlightForeground}">
                                                            <Run Text="(" />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text="{Binding ItemCount, Mode=OneWay}" />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text=" " />
                                                            <Run Text=")" />
                                                        </HTextBlock>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </GroupStyle.HeaderTemplate>
                                        </GroupStyle>
                                    </HDataGridEx.GroupStyle>
                                    <HDataGridEx.Columns>
                                        <HDataGridTextColumn Header="환자구분"
                                                             Binding="{Binding PACT_TP_CD, Converter={StaticResource PACT_TP_NMConverter}}"
                                                             VerticalAlignment="Center"
                                                             HorizontalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="60" />
                                        <HDataGridTextColumn Header="항목구분"
                                                             Binding="{Binding ITEM_TYPE}"
                                                             VerticalAlignment="Center"
                                                             HorizontalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="70" />
                                        <HDataGridTextColumn Header="항목명"
                                                             Binding="{Binding ITEM_NM}"
                                                             VerticalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="155">
                                            <HDataGridTextColumn.CellStyle>
                                                <Style TargetType="{x:Type HDataGridCell}">
                                                    <Setter Property="ToolTip"
                                                            Value="{Binding ITEM_NM}" />
                                                </Style>
                                            </HDataGridTextColumn.CellStyle>
                                        </HDataGridTextColumn>
                                        <HDataGridTextColumn Header="작성일자"
                                                             Binding="{Binding WRITING_DATE, StringFormat=yyyy-MM-dd}"
                                                             VerticalAlignment="Center"
                                                             HorizontalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="80" />
                                        <HDataGridTextColumn Header="진료과"
                                                             Binding="{Binding WRITING_DEPT_NM}"
                                                             VerticalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="100" />
                                        <HDataGridTextColumn Header="작성자"
                                                             Binding="{Binding WRITER_NM}"
                                                             HorizontalAlignment="Center"
                                                             VerticalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="65" />
                                        <HDataGridTextColumn Header="서명"
                                                             Binding="{Binding MDRC_WRT_STS_CD_YN}"
                                                             HorizontalAlignment="Center"
                                                             VerticalAlignment="Center"
                                                             TextTrimming="CharacterEllipsis"
                                                             Width="*" />
                                    </HDataGridEx.Columns>
                                </HDataGridEx>
                            </Grid>
                            <HGridSplitter HorizontalAlignment="Stretch"
                                           Grid.Row="1"
                                           VerticalAlignment="Center" />
                            <Grid Margin="0"
                                  Grid.Row="3">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"
                                                   MinHeight="37" />
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <Grid Height="30"
                                      Margin="0,0,0,5">
                                    <DockPanel LastChildFill="False">
                                        <StackPanel Orientation="Horizontal">
                                            <Border HorizontalAlignment="Left"
                                                    Style="{StaticResource TitleOneDepthBulletStyle}" />
                                            <HTextBlock Text="이력목록"
                                                        Foreground="{StaticResource TextHighlightForeground}"
                                                        HorizontalAlignment="Left"
                                                        VerticalAlignment="Center"
                                                        Margin="5,0,0,0" />
                                        </StackPanel>
                                        <HButton Content="조회"
                                                 ButtonTyped="Retrive"
                                                 VerticalAlignment="Center"
                                                 ButtonStyleType="Search"
                                                 DockPanel.Dock="Right"
                                                 Command="{Binding SearchMultiRecordContentHistoryCommand}"
                                                 CommandParameter="{Binding SelectedHavingAMedicalExaminationDetailBindingList}"
                                                 ToolTip="기록 내용을 조회합니다" />
                                        <HCheckBox Content="이미지 출력" BorderBrush="{StaticResource RCLightBorderBrush}"
                                               HorizontalAlignment="Left"
                                               VerticalAlignment="Center"
                                               DockPanel.Dock="Right"
                                               Margin="0,0,10,0"
                                               IsEnabled ="{Binding IsImagePrintingAsEnabled}" 
                                               Visibility="{Binding ImagePrintingAskVisibility}"
                                               IsChecked="{Binding ImagePrintingAskChecked}">
                                            <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="Checked">
                                                    <i:InvokeCommandAction Command="{Binding ImagePrintingAskCheckedCommand}" />
                                                </i:EventTrigger>
                                                <i:EventTrigger EventName="Unchecked">
                                                    <i:InvokeCommandAction Command="{Binding ImagePrintingAskCheckedCommand}" />
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>
                                        </HCheckBox>
                                        <HCheckBox Content="수술기록 이미지 출력" BorderBrush="{StaticResource RCLightBorderBrush}"
                                               HorizontalAlignment="Left"
                                               VerticalAlignment="Center"
                                               DockPanel.Dock="Right"
                                               Margin="0,0,10,0"
                                               IsEnabled ="{Binding IsImageOperationPrintingAsEnabled}" 
                                               Visibility="{Binding OperationimagePrintingAskVisibility}"
                                               IsChecked="{Binding OperationImagePrintingAskChecked}">
                                            <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="Checked">
                                                    <i:InvokeCommandAction Command="{Binding OperationImagePrintingAskCheckedCommand}" />
                                                </i:EventTrigger>
                                                <i:EventTrigger EventName="Unchecked">
                                                    <i:InvokeCommandAction Command="{Binding OperationImagePrintingAskCheckedCommand}" />
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>
                                        </HCheckBox>
                                        <HCheckBox Content="출력용 조회"                                                   
                                                    DockPanel.Dock="Right"
                                                    VerticalAlignment="Center"
                                                    HorizontalAlignment="Right"                                                 
                                                    Margin="0,0,10,0" 
                                                    Visibility="{Binding PrintingAskVisibility}"
                                                    IsChecked="{Binding PrintingAskChecked}">
                                            <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="Checked">
                                                    <i:InvokeCommandAction Command="{Binding PrintingAskCheckedCommand}" />
                                                </i:EventTrigger>
                                                <i:EventTrigger EventName="Unchecked">
                                                    <i:InvokeCommandAction Command="{Binding PrintingAskCheckedCommand}" />
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>
                                        </HCheckBox>
                                    </DockPanel>
                                    <Border Background="{StaticResource OneDepthTitleLineBackground}"
                                            VerticalAlignment="Bottom"
                                            Height="2" />
                                </Grid>
                                <!---->
                                <HDataGridEx Grid.Row="2"
                                         IsReadOnly="True"
                                         HeadersVisibility="All"
                                         x:Name="grdHavingExamMedrecDetail"
                                         ItemsSource="{Binding HavingAMedicalExaminationDetailBindingList}" Grid.ColumnSpan="2"
                                         MultiSelectorBehaviors.SynchronizedSelectedItems="{Binding SelectedHavingAMedicalExaminationDetailBindingList, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="RowDoubleClick">
                                            <i:InvokeCommandAction Command="{Binding SearchMultiRecordContentHistoryCommand}"
                                                               CommandParameter="{Binding SelectedItem, ElementName=grdHavingExamMedrecDetail}" />
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                    <HDataGridEx.Columns>
                                        <HDataGridTextColumn Header="Doc #" HorizontalAlignment="Center" Binding="{Binding MDRC_ID}"/>
                                        <HDataGridTextColumn Header="Release #"
                                                         HorizontalAlignment="Center"
                                                         Binding="{Binding MDRC_FOM_SEQ}" />
                                        <HDataGridTextColumn Header="진료과"                                                         
                                                         Binding="{Binding WRITING_DEPT_NM}" />
                                        <HDataGridTextColumn Header="작성일시"
                                                         HorizontalAlignment="Center"
                                                         Binding="{Binding WRITING_DATE, StringFormat={}{0:yyyy-MM-dd HH:mm:ss}}" />
                                        <HDataGridTextColumn Header="작성자"
                                                         HorizontalAlignment="Center"
                                                         Binding="{Binding WRITER_NM}" />
                                        <HDataGridTextColumn Header="서명"
                                                         HorizontalAlignment="Center"
                                                         Binding="{Binding MDRC_WRT_STS_CD_YN}" />
                                        <HDataGridTextColumn Header="삭제" HorizontalAlignment="Center" Binding="{Binding MDRC_DC_TP_YN}">
                                            <HDataGridTextColumn.CellStyle>
                                                <Style TargetType="{x:Type HDataGridCell}">
                                                    <Setter Property="ToolTip" Value="{Binding MDRC_DEL_INFO}" />
                                                </Style>
                                            </HDataGridTextColumn.CellStyle>
                                        </HDataGridTextColumn>
                                        <HDataGridTextColumn Header="서식ID" Binding="{Binding MDFM_ID}" />
                                    </HDataGridEx.Columns>
                                </HDataGridEx>
                                <!---->
                            </Grid>
                        </Grid>

                        <HToggleButton Content="정렬"
                                       x:Name="hToggleButton1_1"
                                       Template="{StaticResource CommonExpandButtonTemplateKey}"
                                       HorizontalContentAlignment="Stretch"
                                       VerticalAlignment="Top"
                                       Grid.Row="1"
                                       Tag="Up" />
                        <AnimateExpander IsExpanded="{Binding IsChecked, ElementName=hToggleButton1}"
                                         Grid.Row="1"
                                         HeaderVisibility="Collapsed"
                                         Margin="0,15,0,0">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="30" />
                                    <RowDefinition Height="30" />
                                </Grid.RowDefinitions>
                                <StackPanel Orientation="Horizontal"
                                            Grid.ColumnSpan="2"
                                            VerticalAlignment="Center"
                                            Margin="10,0">
                                    <Border HorizontalAlignment="Right"
                                            Style="{StaticResource TitleThreeDepthBulletStyle}" />
                                    <HTextBlock TextWrapping="Wrap"
                                                Text="목록조회"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                Margin="5,0,0,0"
                                                Foreground="{StaticResource TextHighlightForeground}" />
                                    <RadioButtonList ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                     VerticalAlignment="Center"
                                                     ItemMargin="5,0,0,0"
                                                     Grid.Column="1"
                                                     Grid.Row="1"
                                                     ItemsSource="{Binding Code_ListSort_Type}"
                                                     SelectedValuePath="COMN_CD"
                                                     DisplayMemberPath="COMN_CD_NM"
                                                     SelectedItem="{Binding SelectedListSort_Type}">
                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="SelectionChanged">
                                                <i:InvokeCommandAction Command="{Binding SelectListSortTypeCommand}"
                                                                       CommandParameter="{Binding RecordListByMedicalTreatmentDay}" />
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>
                                    </RadioButtonList>
                                </StackPanel>
                                <StackPanel Orientation="Horizontal"
                                            Grid.Row="1"
                                            Grid.ColumnSpan="2"
                                            VerticalAlignment="Center"
                                            Margin="10,0">
                                    <Border HorizontalAlignment="Right"
                                            Style="{StaticResource TitleThreeDepthBulletStyle}" />
                                    <HTextBlock TextWrapping="Wrap"
                                                Text="내용조회"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                Margin="5,0,0,0"
                                                Foreground="{StaticResource TextHighlightForeground}" />
                                    <RadioButtonList ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                     VerticalAlignment="Center"
                                                     ItemMargin="5,0,0,0"
                                                     Grid.Column="1"
                                                     Grid.Row="1"
                                                     ItemsSource="{Binding Code_ContentSort_Type}"
                                                     SelectedValuePath="COMN_CD"
                                                     DisplayMemberPath="COMN_CD_NM"
                                                     SelectedItem="{Binding SelectedContentListSort_Type}" />
                                </StackPanel>
                            </Grid>
                        </AnimateExpander>
                    </Grid>
                </HTabItem>
                <!-- 2.5.기록이력조회 탭 끝-->
                <!-- 3.진단서 탭 시작-->
                <HTabItem Header="진단서" Visibility="{Binding AskByDiagnosisCertificateTab}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="0.6*" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="0.4*" />
                        </Grid.RowDefinitions>
                        <Grid Height="30"
                                  VerticalAlignment="Top"
                                  Margin="0,0,0,5">
                            <StackPanel Orientation="Horizontal">
                                <Border HorizontalAlignment="Left"
                                            Style="{StaticResource TitleOneDepthBulletStyle}" />
                                <HTextBlock TextWrapping="Wrap"
                                                Text="진단서/의뢰서"
                                                VerticalAlignment="Center"
                                                Foreground="{StaticResource TextHighlightForeground}"
                                                Margin="5,0,0,0" />
                            </StackPanel>
                            <Border Background="{StaticResource OneDepthTitleLineBackground}"
                                        VerticalAlignment="Bottom"
                                        Height="2" />
                            <StackPanel HorizontalAlignment="Right"
                                            Margin="0,0,0,9"
                                            Orientation="Horizontal">
                                <HButton Content="목록조회"
                                             ButtonTyped="Retrive"
                                             VerticalAlignment="Top"
                                             ButtonStyleType="Search"
                                             Margin="0,0,5,0"
                                             Visibility="Visible"
                                             Command="{Binding SearchRecordListByDiagnosisCommand}" />
                                <HButton Content="조회"
                                             ButtonTyped="Retrive"
                                             VerticalAlignment="Top"
                                             ButtonStyleType="Search"
                                             Margin="0,0,5,0"
                                             Visibility="Collapsed"
                                             Command="{Binding SearchDiagnosisCertificateFormCommand}" />
                                <HButton Content="온라인교류"
                                             ButtonTyped="None"
                                             HorizontalAlignment="Right"
                                             VerticalAlignment="Top"
                                             Visibility="Collapsed" />
                            </StackPanel>

                        </Grid>

                        <HDataGridEx x:Name="dgrdRecordListByDiagnosis"
                                         Grid.Row="1"
                                         Margin="0,0,0,10"
                                         AutoGenerateColumns="False"
                                         SelectionMode="Single"
                                         IsReadOnly="True"
                                         SelectionUnit="FullRow"
                                         HeadersVisibility="All"
                                         ShowRowIndex="True"
                                         CanUserSelectRowHeader="False"
                                         SelectedValue="SELECTED_RECORDLISTBYDIAGNOSIS_DTO"
                                         ItemsSource="{Binding RecordListByDiagnosis}">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="RowDoubleClick">
                                    <i:InvokeCommandAction Command="{Binding SearchDiagnosisCertificateFormCommand}"
                                                               CommandParameter="{Binding SelectedItem, ElementName=dgrdRecordListByDiagnosis}" />
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                            <HDataGridEx.Columns>
                                <HDataGridTextColumn Header="출력"
                                                         Binding="{Binding PRNT_YN}"
                                                         VerticalAlignment="Center"
                                                         HorizontalAlignment="Center"
                                                         TextTrimming="CharacterEllipsis"
                                                         Width="40" />
                                <HDataGridTextColumn Header="구분"
                                                         Binding="{Binding PACT_TP_CD}"
                                                         VerticalAlignment="Center"
                                                         HorizontalAlignment="Center"
                                                         TextTrimming="CharacterEllipsis"
                                                         Width="40" />
                                <HDataGridTextColumn Header="작성과"
                                                         Binding="{Binding WRITING_DEPT_NM}"
                                                         VerticalAlignment="Center"
                                                         TextTrimming="CharacterEllipsis"
                                                         Width="100" />
                                <HDataGridTextColumn Header="작성일"
                                                         Binding="{Binding WRITING_DATE, StringFormat=yyyy-MM-dd}"
                                                         VerticalAlignment="Center"
                                                         HorizontalAlignment="Center"
                                                         TextTrimming="CharacterEllipsis"
                                                         Width="80" />
                                <HDataGridTextColumn Header="기록명"
                                                         Binding="{Binding ITEM_NM}"
                                                         VerticalAlignment="Center"
                                                         TextTrimming="CharacterEllipsis"
                                                         Width="200">
                                    <HDataGridTextColumn.CellStyle>
                                        <Style TargetType="{x:Type HDataGridCell}">
                                            <Setter Property="ToolTip"
                                                        Value="{Binding ITEM_NM}" />
                                        </Style>
                                    </HDataGridTextColumn.CellStyle>
                                </HDataGridTextColumn>
                                <HDataGridTextColumn Header="서명"
                                                         Binding="{Binding MDRC_WRT_STS_CD_YN}"
                                                         VerticalAlignment="Center"
                                                         HorizontalAlignment="Center"
                                                         TextTrimming="CharacterEllipsis"
                                                         Width="40" />
                                <HDataGridTextColumn Header="연번호"
                                                         Binding="{Binding DGNS_RER_RCDC_NO}"
                                                         HorizontalAlignment="Center"
                                                         VerticalAlignment="Center"
                                                         TextTrimming="CharacterEllipsis"
                                                         Width="100" />
                            </HDataGridEx.Columns>
                            <HDataGridEx.RowStyle>
                                <Style TargetType="{x:Type HDataGridRow}">

                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding PRNT_YN}"
                                                         Value="N">
                                            <Setter Property="Background"
                                                        Value="#4C56A35B" />
                                            <Setter Property="Foreground"
                                                        Value="White" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </HDataGridEx.RowStyle>
                        </HDataGridEx>
                        <Grid Height="30"
                                  VerticalAlignment="Top"
                                  Grid.Row="2"
                                  Margin="0,0,0,5">
                            <StackPanel Orientation="Horizontal">
                                <Border HorizontalAlignment="Left"
                                            Style="{StaticResource TitleOneDepthBulletStyle}" />
                                <HTextBlock TextWrapping="Wrap"
                                                Text="출력여부 조회"
                                                VerticalAlignment="Center"
                                                Foreground="{StaticResource TextHighlightForeground}"
                                                Margin="5,0,0,0" />
                            </StackPanel>
                            <Border Background="{StaticResource OneDepthTitleLineBackground}"
                                        VerticalAlignment="Bottom"
                                        Height="2" />
                            <StackPanel HorizontalAlignment="Right"
                                            Orientation="Horizontal"
                                            VerticalAlignment="Center">
                                <HButton Content="조회"
                                             ButtonTyped="Retrive"
                                             VerticalAlignment="Center"
                                             ButtonStyleType="Search"
                                             Margin="0,0,5,0"
                                             Command="{Binding SearchDiagnosisCertificatePrintListCommand}" />
                                <HButton Content="엑셀"
                                             ButtonTyped="Excel"
                                             Style="{StaticResource CommonButtonExcelStyle}"
                                             HorizontalAlignment="Left"
                                             Command="{Binding GetPrintListToExcelCommand}"
                                             VerticalAlignment="Center" />
                            </StackPanel>
                        </Grid>
                        <HDataGridEx x:Name="dgrdDiagnosisCertificatePrintList"
                                         Grid.Row="3"
                                         AutoGenerateColumns="False"
                                         SelectionMode="Single"
                                         IsReadOnly="True"
                                         SelectionUnit="FullRow"
                                         HeadersVisibility="All"
                                         ShowRowIndex="True"
                                         CanUserSelectRowHeader="False"
                                         ItemsSource="{Binding DiagnosisCertificatePrintList}"
                                         SelectedItem="{Binding SelectedDiagnosisCertificatePrint, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <HDataGridEx.Columns>
                                <HDataGridTextColumn Header="연번호"
                                                         Binding="{Binding DGNS_RER_RCDC_NO}"
                                                         VerticalAlignment="Center"
                                                         HorizontalAlignment="Center"
                                                         TextTrimming="CharacterEllipsis"
                                                         Width="100" />
                                <HDataGridTextColumn Header="기록명"
                                                         Binding="{Binding RCDC_KND_NM}"
                                                         VerticalAlignment="Center"
                                                         TextTrimming="CharacterEllipsis"
                                                         Width="180">
                                    <HDataGridTextColumn.CellStyle>
                                        <Style TargetType="{x:Type HDataGridCell}">
                                            <Setter Property="ToolTip"
                                                        Value="{Binding RCDC_KND_NM}" />
                                        </Style>
                                    </HDataGridTextColumn.CellStyle>
                                </HDataGridTextColumn>
                                <HDataGridTextColumn Header="출력일시"
                                                         Binding="{Binding PRNT_DTM, StringFormat=\{0:yyyy-MM-dd HH:mm:ss\}}"
                                                         VerticalAlignment="Center"
                                                         TextTrimming="CharacterEllipsis"
                                                         Width="120" />
                                <HDataGridTextColumn Header="출력자"
                                                         Binding="{Binding PRNT_STF_NM}"
                                                         VerticalAlignment="Center"
                                                         HorizontalAlignment="Center"
                                                         TextTrimming="CharacterEllipsis"
                                                         Width="80" />
                                <HDataGridTextColumn Header="순번"
                                                         Binding="{Binding PRNT_SEQ}"
                                                         VerticalAlignment="Center"
                                                         HorizontalAlignment="Center"
                                                         TextTrimming="CharacterEllipsis"
                                                         Width="40" />
                            </HDataGridEx.Columns>
                        </HDataGridEx>

                    </Grid>
                </HTabItem>
                <!-- 3.진단서 탭 끝-->
                <!-- 4.동의서 탭 시작-->
                <!--
                <HTabItem Header="동의서" Visibility="{Binding AskByConsentFormTab}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="30" />
                            <RowDefinition Height="0.4*" />
                        </Grid.RowDefinitions>
                        <Grid Height="30"
                                  VerticalAlignment="Top"
                                  Margin="0,0,0,5">
                            <StackPanel Grid.Row="0"
                                            Orientation="Horizontal">
                                <Border HorizontalAlignment="Left"
                                            Style="{StaticResource TitleOneDepthBulletStyle}" />
                                <HTextBlock TextWrapping="Wrap"
                                                Text="기록종류"
                                                VerticalAlignment="Center"
                                                Foreground="{StaticResource TextHighlightForeground}"
                                                Margin="5,0,0,0" />

                            </StackPanel>

                            <Border Background="{StaticResource OneDepthTitleLineBackground}"
                                        VerticalAlignment="Bottom"
                                        Height="2" />
                        </Grid>
                        <Border BorderThickness="0,0,1,1"
                                    Height="40"
                                    BorderBrush="{StaticResource SearchAreaDarkBorderBrush}"
                                    Background="{StaticResource SearchAreaBackground}"
                                    Grid.Row="1">
                            <Border BorderBrush="{StaticResource SearchAreaLightBorderBrush}"
                                        BorderThickness="1,1,0,0">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Border Background="{StaticResource SearchAreaBoundaryLineBackground}"
                                                BorderBrush="{StaticResource SearchAreaBoundaryLineBorderBrush}"
                                                BorderThickness="0,0,0,1"
                                                Height="2"
                                                Margin="-10,0"
                                                VerticalAlignment="Bottom" />
                                    <StackPanel Orientation="Horizontal"
                                                    Margin="10,0"
                                                    Grid.Row="1">
                                        <Border HorizontalAlignment="Right"
                                                    Style="{StaticResource TitleThreeDepthBulletStyle}" />
                                        <HTextBlock Text="기록일자"
                                                        HorizontalAlignment="Left"
                                                        VerticalAlignment="Center"
                                                        Margin="5,0,0,0"
                                                        Foreground="{StaticResource TextHighlightForeground}" />
                                        <HFromToCalendar Margin="0,0,0,-1"
                                                             FromDate="{Binding SearchCondition.SEARCH_FROM_DATE}"
                                                             ToDate="{Binding SearchCondition.SEARCH_TO_DATE}" />
                                        <HComboBox Width="60"
                                                       VerticalAlignment="Center"
                                                       Margin="5,0,0,0"
                                                       ItemsSource="{Binding Code_Period}"
                                                       SelectedValuePath="COMN_CD"
                                                       DisplayMemberPath="COMN_CD_NM"
                                                       SelectedItem="{Binding SelectedPeriod}">
                                            <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="SelectionChanged">
                                                    <i:InvokeCommandAction Command="{Binding SelectPeriodCommand}" />
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>
                                        </HComboBox>
                                        <Border HorizontalAlignment="Right"
                                                    Style="{StaticResource TitleThreeDepthBulletStyle}"
                                                    Margin="10,0,0,0" />
                                        <HTextBlock Text="진료과"
                                                        HorizontalAlignment="Left"
                                                        VerticalAlignment="Center"
                                                        Margin="5,0,0,0"
                                                        Foreground="{StaticResource TextHighlightForeground}" />
                                        <HComboBox x:Name="cbxEtcDept"
                                                       Width="130"
                                                       Margin="5,0"
                                                       AutoComplate="True"
                                                       ItemsSource="{Binding DataContext.DepartmentGroup, RelativeSource={RelativeSource AncestorType={x:Type UserControl}, Mode=FindAncestor}}"
                                                       SelectedValuePath="DEPT_CD"
                                                       DisplayMemberPath="DEPT_NM"
                                                       SelectedItem="{Binding DataContext.SelectedDepartment, RelativeSource={RelativeSource AncestorType={x:Type UserControl}, Mode=FindAncestor}}"
                                                       VerticalAlignment="Center">
                                            <i:Interaction.Triggers>
                                                <i:EventTrigger EventName="SelectionChanged">
                                                    <i:InvokeCommandAction Command="{Binding SelectDepartmentCommand}" />
                                                </i:EventTrigger>
                                            </i:Interaction.Triggers>
                                            <HComboBox.InputBindings>
                                                <KeyBinding Key="ENTER"
                                                                Command="{Binding DataContext.SetDepartmentCommand, RelativeSource={RelativeSource AncestorType={x:Type UserControl}, Mode=FindAncestor}}"
                                                                CommandParameter="{Binding Text, ElementName=cbxEtcDept}" />
                                            </HComboBox.InputBindings>
                                        </HComboBox>
                                    </StackPanel>
                                </Grid>

                            </Border>
                        </Border>
                        <StackPanel HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Orientation="Horizontal"
                                        Grid.Row="2">
                            <HCheckBox Content="출력용 조회" BorderBrush="{StaticResource RCLightBorderBrush}"
                                              DockPanel.Dock="Right"
                                              VerticalAlignment="Center"
                                              HorizontalAlignment="Right" 
                                              Margin="0,0,10,0" 
                                              Visibility="{Binding PrintingAskVisibility}"
                                              IsChecked="{Binding PrintingAskChecked}" />
                            <HButton Content="목록조회"
                                         ButtonTyped="Retrive"
                                         VerticalAlignment="Top"
                                         ButtonStyleType="Search"
                                         Margin="0,0,5,0"
                                         Visibility="Visible"
                                         Command="{Binding SearchRecordListByConsentNoteCommand}" />
                            <HButton Content="조회"
                                         ButtonTyped="Retrive"
                                         VerticalAlignment="Top"
                                         ButtonStyleType="Search"
                                         Margin="0,0,5,0"
                                         Visibility="Visible"
                                         Command="{Binding SelectConsentNoteRecordCommand}" />
                        </StackPanel>
                        <HDataGridEx x:Name="dgrdRecordListByEtc"
                                         Grid.Row="3"
                                         Margin="0,10,0,0"
                                         AutoGenerateColumns="False"
                                         SelectionMode="Extended"
                                         IsReadOnly="True"
                                         SelectionUnit="FullRow"
                                         HeadersVisibility="All"
                                         ShowRowIndex="True"
                                         ItemsSource="{Binding RecordListByConsentNote}"
                                         MultiSelectorBehaviors.SynchronizedSelectedItems="{Binding SelectedRecordListByConsentNote, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="RowDoubleClick">
                                    <i:InvokeCommandAction Command="{Binding SelectConsentNoteRecordCommand}"
                                                               CommandParameter="{Binding SelectedItem, ElementName=dgrdRecordListByEtc}" />
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                            <HDataGridEx.Columns>
                                <HDataGridTextColumn Header="수진일"
                                                         Binding="{Binding PACT_DTM,StringFormat=yyyy-MM-dd}"
                                                         VerticalAlignment="Center"
                                                         TextTrimming="CharacterEllipsis"
                                                         Width="80" />
                                <HDataGridTextColumn Header="작성일"
                                                         Binding="{Binding WRITING_DATE,StringFormat=yyyy-MM-dd}"
                                                         VerticalAlignment="Center"
                                                         HorizontalAlignment="Center"
                                                         TextTrimming="CharacterEllipsis"
                                                         Width="80" />
                                <HDataGridTextColumn Header="진료과"
                                                         Binding="{Binding MEDDEPT_NM}"
                                                         VerticalAlignment="Center"
                                                         TextTrimming="CharacterEllipsis"
                                                         Width="80" />
                                <HDataGridTextColumn Header="기록명"
                                                         Binding="{Binding CCFM_NM}"
                                                         VerticalAlignment="Center"
                                                         TextTrimming="CharacterEllipsis"
                                                         Width="200">
                                    <HDataGridTextColumn.CellStyle>
                                        <Style TargetType="{x:Type HDataGridCell}">
                                            <Setter Property="ToolTip"
                                                        Value="{Binding CCFM_NM}" />
                                        </Style>
                                    </HDataGridTextColumn.CellStyle>
                                </HDataGridTextColumn>
                                <HDataGridTextColumn Header="환자구분"
                                                         Binding="{Binding PACT_TP_NM}"
                                                         VerticalAlignment="Center"
                                                         TextTrimming="CharacterEllipsis"
                                                         Width="60" />
                                <HDataGridTextColumn Header="서명"
                                                         Binding="{Binding MDRC_WRT_STS_CD_YN}"
                                                         VerticalAlignment="Center"
                                                         TextTrimming="CharacterEllipsis"
                                                         Width="40" />
                            </HDataGridEx.Columns>
                            <HDataGridEx.RowStyle>
                                <Style TargetType="{x:Type HDataGridRow}">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding MDRC_WRT_STS_CD_YN}"
                                                         Value="N">
                                            <Setter Property="Background"
                                                        Value="#4C56A35B" />
                                            <Setter Property="Foreground"
                                                        Value="White" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </HDataGridEx.RowStyle>
                        </HDataGridEx>


                    </Grid>
                </HTabItem>
                -->
                <!-- 4.동의서 탭 끝-->
                <!-- 5.특성화 리포트 탭 시작-->
                <HTabItem Header="특성화 리포트" Visibility="{Binding AskByCharacteristicRecordTab}">
                    <DockPanel>
                        <Grid Height="30" Margin="0,0,0,5" DockPanel.Dock="Top">
                            <StackPanel Orientation="Horizontal">
                                <Border Style="{StaticResource TitleOneDepthBulletStyle}"/>
                                <HTextBlock TextWrapping="Wrap" Text="기록종류" VerticalAlignment="Center" Foreground="{StaticResource TextHighlightForeground}" Margin="5,0,0,0"/>
                            </StackPanel>
                            <Border Background="{StaticResource OneDepthTitleLineBackground}" VerticalAlignment="Bottom" Height="2"/>
                        </Grid>
                        <Border BorderThickness="0,0,1,1" Height="80" BorderBrush="{StaticResource SearchAreaDarkBorderBrush}" Background="{StaticResource SearchAreaBackground}" DockPanel.Dock="Top">
                            <Border BorderBrush="{StaticResource SearchAreaLightBorderBrush}" BorderThickness="1,1,0,0">
                                <Grid Margin="10,0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>
                                    <RadioButtonList ItemMargin="5,5" ScrollViewer.VerticalScrollBarVisibility="Auto" VerticalAlignment="Center" Grid.RowSpan="2"
                                                     DisplayMemberPath="COMN_CD_NM" SelectedValuePath="COMN_CD" ItemsSource="{Binding Code_CharacteristicRecord_Type}"
                                                     SelectedValue="{Binding SelectedCharacteristicRecordType}" >
                                        <RadioButtonList.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <UniformGrid Columns="4"/>
                                            </ItemsPanelTemplate>
                                        </RadioButtonList.ItemsPanel>
                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="SelectionChanged">
                                                <i:InvokeCommandAction Command="{Binding CharacteristicRecordAskCommand}" />
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>
                                    </RadioButtonList>
                                    <Border Background="{StaticResource SearchAreaBoundaryLineBackground}" BorderBrush="{StaticResource SearchAreaBoundaryLineBorderBrush}" Margin="-10,0" BorderThickness="0,0,0,1" Height="2" VerticalAlignment="Bottom" Grid.Row="1"/>
                                </Grid>
                            </Border>
                        </Border>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" DockPanel.Dock="Top" Margin="0,10,0,0">
                            <HCheckBox Content="출력용 조회" BorderBrush="{StaticResource RCLightBorderBrush}"
                                              DockPanel.Dock="Right"
                                              VerticalAlignment="Center"
                                              HorizontalAlignment="Right" 
                                              Margin="0,0,10,0" 
                                              Visibility="{Binding PrintingAskVisibility}"  
                                              IsChecked="{Binding PrintingAskChecked}" />
                            <HButton Content="조회" ButtonStyleType="Search" Margin="0,0,0,0" Command="{Binding SearchCharacteristicRecordCommand}" CommandParameter="{Binding ElementName=dgrdCharacteristicRecordList, Path=SelectedItem}" />
                        </StackPanel>
                        <HDataGridEx x:Name="dgrdCharacteristicRecordList" Margin="0,10,0,0" ItemsSource="{Binding RecordListByCharacteristicRecord}" IsReadOnly="True" HeadersVisibility="Column">
                            <HDataGridEx.Columns>
                                <HDataGridTextColumn Header="수진일" Width="70" HorizontalAlignment="Center" Binding="{Binding PACT_DTM, StringFormat=yyyy-MM-dd}" />
                                <HDataGridTextColumn Header="작성일" Width="70" HorizontalAlignment="Center" Binding="{Binding WRITING_DATE, StringFormat=yyyy-MM-dd}" />
                                <HDataGridTextColumn Header="진료과" Width="140" Binding="{Binding WRITING_DEPT_NM}" />
                                <HDataGridTextColumn Header="기록지명" Width="*" Binding="{Binding ITEM_NM}" />
                                <HDataGridTextColumn Header="구분" Width="70" HorizontalAlignment="Center" Binding="{Binding PACT_TP_CD, Converter={StaticResource PACT_TP_NMConverter}}" />
                                <HDataGridTextColumn Header="서명" Width="60" HorizontalAlignment="Center" Binding="{Binding MDRC_WRT_STS_CD_YN}" />
                            </HDataGridEx.Columns>
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="RowDoubleClick">
                                    <i:InvokeCommandAction Command="{Binding SearchCharacteristicRecordCommand}" CommandParameter="{Binding ElementName=dgrdCharacteristicRecordList, Path=SelectedItem}" />
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </HDataGridEx>
                    </DockPanel>
                </HTabItem>
                <!-- 5.특성화 리포트 탭 끝-->
            </HTabControl>
            <Grid Grid.Column="2"
                  Grid.Row="2">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition />
                    <!--<RowDefinition Height="10" />
                    <RowDefinition Height="30" />-->
                </Grid.RowDefinitions>
                <Border Style="{StaticResource OneAreaDarkBorderStyle}"
                        VerticalAlignment="Bottom"
                        Visibility="{Binding SearchPrintModeVisibility}">
                    <Border Style="{StaticResource OneAreaLightBorderStyle}"
                            Margin="0">
                        <DockPanel LastChildFill="False" Margin="10,0">
                            <StackPanel Orientation="Horizontal"
                                        VerticalAlignment="Center"
                                        Visibility="{Binding PrintPreviewVisibility}">
                                <HTextBlock Text="출력옵션"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            Foreground="{StaticResource TextHighlightForeground}" 
                                            ToolTip="출력옵션을 변경하실 경우 내용을 재조회하셔야 반영됩니다."/>
                                <RadioButtonList HorizontalAlignment="Center"
                                                 VerticalAlignment="Center"
                                                 ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                 ItemMargin="10,0,0,0">
                                    <RadioButtonListItem x:Name="rblPrintOptionContinue"
                                                         Content="연속"
                                                         IsSelected="True"
                                                         ToolTip="여백없이 기록을 이어서 출력합니다." />
                                    <RadioButtonListItem x:Name="rblPrintOptionPage"
                                                         Content="페이지"
                                                         ToolTip="기록건당 한 페이지로 출력합니다." />
                                </RadioButtonList>
                            </StackPanel>
                            <HButton x:Name="btnPrintPreview"
                                         Content="출력"
                                         DockPanel.Dock="Left"
                                        Margin="10,0,0,0"
                                         ButtonTyped="None"
                                         Style="{StaticResource CommonButtonPrintStyle}"
                                         VerticalAlignment="Center"
                                         HorizontalAlignment="Right"
                                         
                                         ToolTip="인쇄 미리보기"
                                         Visibility="{Binding PrintPreviewVisibility}"
                                         Command="{Binding PreviewPrintingCommand}" />

                            <!--<HButton Content="HButton"
                                         HorizontalAlignment="Right"
                                         Padding="3,0"
                                         Margin="5,0,5,0"
                            DockPanel.Dock="Right"
                                         ToolTip="창크기 변경"
                                         Command="{Binding ChangeWindowSizeCommand}"
                                         CommandParameter="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}">
                                    <HButton.ContentTemplate>
                                        <DataTemplate>
                                            <HImage Source="{DynamicResource IconMedicalRecord01}"
                                                    Stretch="None" />
                                        </DataTemplate>
                                    </HButton.ContentTemplate>
                                </HButton>-->
                        </DockPanel>
                    </Border>
                </Border>
                <Grid Grid.Row="1"
                      Margin="0,10,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="0.861*" />
                    </Grid.ColumnDefinitions>
                    <Border Grid.Column="1"
                            CornerRadius="0,5,5,0">
                        <Grid>
                            <BookFlowDocumentReader  x:Name="flowDocViewer"                                                     
                                                     ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                     ViewingMode="{Binding FlowDocumentViewMode}"
                                                     MinWidth="600"
                                                     Margin="4,0,0,4"
                                                     Visibility="Visible"                                                                          
                                                     ViewModeChanged="flowDocViewer_ViewModeChanged"
                                                     PreviewMouseLeftButtonDown="flowDocViewer_PreviewMouseLeftButtonDown"                                                        
                                                     MinZoom="50"
                                                     MaxZoom="200"
                                                     Zoom="100"                                                     
                                                     ZoomIncrement="10"
                                                     Focusable="True" 
                                                     PreviewMouseRightButtonUp="flowDocViewer_PreviewMouseRightButtonUp"
                                                     />
                            <FlowDocumentReader  x:Name="flowDocPrintViewer"
                                                 ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                 ViewingMode="{Binding FlowDocumentViewMode}"
                                                 MinWidth="600"
                                                 Margin="2"
                                                 Visibility="Collapsed" />
                            <Grid x:Name="ucDiagnosisCertificateFormManagement"
                                            Width="650"
                                            Height="auto"
                                            Margin="0"
                                            Visibility="Collapsed"
                                            ScrollViewer.VerticalScrollBarVisibility="Visible"/>
                            <Grid x:Name="layoutElectronicConsent"
                                  Margin="0"
                                  Width="805"
                                  Height="815"
                                  Visibility="Collapsed" />
                            <!--<Border Background="Transparent" Margin="0,0,0,33"/>-->
                        </Grid>
                    </Border>
                </Grid>
            </Grid>
            <HGridSplitter Grid.Column="1"
                           HorizontalAlignment="Center"
                           Grid.Row="2">
                <HGridSplitter.Style>
                    <Style TargetType="{x:Type HGridSplitter}">
                        <Setter Property="ToolTip"
                                Value="{Binding ListWidth, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
                    </Style>
                </HGridSplitter.Style>
            </HGridSplitter>
        </Grid>
        <Border Background="{StaticResource BoundaryLineNormalBackground}"
                BorderBrush="{StaticResource BoundaryLineNormalBorderBrush}"
                BorderThickness="0,0,0,1"
                Height="2"
                Grid.Row="0"                
                VerticalAlignment="Bottom"/>
        <Border Background="{StaticResource CommonButtonAreaNormalBackground}"
                Grid.Row="2">
            <DockPanel Margin="10,0"
                       LastChildFill="False">
                <HButton Content="닫기"
                         ButtonTyped="None"
                         ButtonStyleType="Close"
                         DockPanel.Dock="Right"
                         Command="{Binding CmdClose}"
                         CommandParameter="{Binding RelativeSource={RelativeSource AncestorType={x:Type Window}, Mode=FindAncestor}}" />
                <HButton x:Name="btnNewDrgDetermination"
                                         Content="신포괄확정"
                                         DockPanel.Dock="Right"
                                         Margin="10,0,10,0"
                                         ButtonTyped="None"
                                         Style="{StaticResource CommonButtonConfirmStyle}"
                                         VerticalAlignment="Center"
                                         HorizontalAlignment="Right"
                                         ToolTip="신포괄확정"
                                         Visibility="{Binding NewDrgDeterminationVisibility, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                         Command="{Binding NewDrgDeterminationCommand}" />
                <HButton x:Name="btnHtml"
                         Content="HTML"
                         ButtonTyped="None"
                         VerticalAlignment="Center"
                         DockPanel.Dock="Right"
                         ToolTip="FLOWDOCUMENT를 HTML로 변환합니다."
                         Margin="10,0,10,0"
                         Click="HButton_Click"
                         Visibility="Collapsed"/>
                <HButton x:Name="btnOriginalFormView"
                         Content="CANVAS"
                         ButtonTyped="None"
                         DockPanel.Dock="Right"
                         Padding="3,0"
                         Margin="10,0,10,0"
                         ToolTip="과별서식의 canvas를 조회합니다."
                         Visibility="Collapsed"
                         Command="{Binding OriginalRecordOpenPopupCommand}" />
                <HButton x:Name="btnDiagnosisOriginalFormView"
                         Content="진단서Canvas"
                         ButtonTyped="None"
                         DockPanel.Dock="Right"
                         Padding="3,0"
                         Margin="10,0,10,0"
                         ToolTip="진단서 canvas를 조회합니다."
                         Visibility="Collapsed"
                         Command="{Binding DiagnosisOriginalRecordOpenPopupCommand}"
                         CommandParameter="{Binding SelectedItem, ElementName=dgrdRecordListByDiagnosis}" />
                <HButton x:Name="btnGC"
                         ButtonTyped="None"
                        Content="GC"
                        DockPanel.Dock="Right"
                        Padding="3,0"
                        Margin="10,0,10,0"
                        ToolTip="Garbage Collection을 수행합니다."
                        Click="GC_Click"
                        Visibility="Collapsed" />
            </DockPanel>
        </Border>
    </Grid>
</base:UserControlBase>